{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","bomFill","emptyElementContent","emptyTableCellContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","SELECT","SELECT_OVERLAY_SELECTOR","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","tableWizard","tableWizardInsert","cleanFormatting","cssClass","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","replace","retrieveComments","messages","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","alignment","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","lists","indenting","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","trim","defaultValue","getAllComments","html","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","resize","notify","setOptions","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","resizableWidget","resizable","isResizable","isPlainObject","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","getKendoResizable","draggable","ignore","_initializeTableResizing","TableResizing","create","_showTableResizeHandlesProxy","_showTableResizeHandles","bind","_destroyTableResizing","tableResizing","destroy","unbind","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","hide","title","frameBorder","tabIndex","location","hostname","contentWindow","contentDocument","one","decorateFrom","body","open","write","isRtl","msie","edge","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","eventNames","t","NS","_handlers","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","interval","createElement","setAttribute","getElementsByTagName","appendChild","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","range","left","container","offset","direction","next","nextChar","keyCode","BACKSPACE","DELETE","getAttribute","F10","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","click","target","createRange","selectNode","cut copy paste drop dragover","focusin","hasAttribute","show","focusout","toolbarContainerElement","active","get","contains","preventPopupHide","is","focused","removeClass","immutables","Immutables","parents","stopPropagation","gecko","which","o","cmd","toolsFromShortcut","changesContent","refresh","_destroyResizings","deserialization","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","tempInput","blur","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","async","change","managesUndoRedo","key","ctrl","plugin","initialize","unselectable","children","commandArguments","noop","version","_bomFill","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","nodes","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","nodeName","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","isPrevBlock","isNextBlock","el","isBlock","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","tag","closestBy","condition","rootCondition","ofType","changeTag","tagName","skipAttributes","attribute","specified","cssText","editableParent","wrap","unwrap","createEmptyNode","removeAttribute","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","supportsLeadingWhitespace","isFunction","TD","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","div","toEditableHtml","_toEditableImmutables","immutable","last","prependTo","_fillEmptyElements","each","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","l","attributesToRemove","legacyIE","originalSrc","originalHref","deserialize","semanticFilter","mapStart","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","htmlEncode","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","jqNode","serialize","hasClass","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","b","u","styleObj","item","splice","face","script","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","select","selectBox","view","dataSource","decorate","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","parentElement","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","ImmutablesRangeIterator","ImmutablesRangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","getSubRange","subRange","movedStart","movedEnd","enumerate","visit","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","isBomSelected","collapsedToStart","startParent","endParent","startIndex","endIndex","charAt","editableTextNodes","immutableParent","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","complexBlocks","toolsToBeUpdated","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","expandImmutablesIn","startImmutableParent","endImmutableParent","immutablesContext","editableNodes","randomId","chars","round","random","serialized","replaceWith","removeAttr","deletingKey","updateToolOptions","_initOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","cancelDeleting","closestSelectionLi","closestImmutableLi","backspace","del","nextImmutable","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","finishUpdate","endRestorePoint","GenericCommand","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggleClass","toggle","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-login","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table-insert","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-clear-css","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","anchor","origin","copyAnchorStyles","activate","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","dropdown","colorpicker","editorTools","move","constrain","focusableItems","focusElement","currentContainer","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","display","uiData","widget","groupUi","uiElement","trackImmutables","_resize","containerWidth","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","ViewHtmlCommand","dialog","center","FormatCommand","FormatTool","ev","MOUSEDOWN_NS","KEYDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","formatNode","formatNodes","consolidate","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","newRange","ColorTool","palette","_widget","ColorPicker","toolIcon","picker","sender","_popup","fontWeight","fontStyle","lastIndexOfRegExp","str","indexOfRegExp","r","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","_initialText","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","detection","startNode","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","listElements","BlockFormatFinder","candidate","suitable","_resolveListsItems","ImmutablesNS","BlockFormatter","ancestor","images","imageFormat","imageAttributes","nonImages","_handleImmutables","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","immutalbeParent","blockFormatter","formatTag","ListFormatter","BlockFormatTool","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","unwrapTag","isList","li","isImmutable","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","addLastSection","lastSection","sections","lastNodes","ul","fragment","ListCommand","ListTool","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","keyDown","dialogHeight","isIE","ImageBrowser","transport","read","_imageBrowser","selected","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","proxyUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","genericCommand","postProcess","InsertHtmlTool","_selectBox","selectbox","initialValue","defaultExportAsItems","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","unshift","_exec","indentDirection","IndentFormatter","targets","parentList","siblingList","nestedList","targetIndex","mapImmutables","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","parentChildrenLength","emptyParagraphContent","_insertParagraphAfter","NewLineCommand","filler","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","twTool","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","InsertTableTool","cols","tableFromLocation","row","floor","clientY","cellHeight","col","clientX","scrollLeft","cellWidth","cells","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_valid","status","selectedRows","selectedColumns","changed","tableSize","InsertRowCommand","cellCount","newRow","td","InsertColumnCommand","columnIndex","cell","newCell","table","DeleteRowCommand","DeleteColumnCommand","columnCount","TableModificationTool","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","before","after","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardRange","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","splittable","fragmentsHtml","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","applicable","elm","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","extractListLevels","msoListRegExp","level","_createList","styleType","listStyleType","placeholder","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","listIndex","levelType","blockChildren","lastMargin","levels","acceptedNameTags","parseFloat","removeAttributes","removeAttributeNode","createColGroup","colgroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","firstRow","longestRow","headers","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","tdCleaner","cellText","getSibling","PREVIOUS_SIBLING","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","removeTableContent","backspaceHandler","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_addCaret","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","isEndOfLink","_handleSelection","_surroundFullySelectedAnchor","_join","startImmutable","endImmutable","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","print","lowerBound","upperBound","getScrollBarWidth","scrollHeight","clientHeight","calculatePercentageRatio","total","inPercentages","STRING","REGEX_NUMBER_IN_PERCENTAGES","inPixels","REGEX_NUMBER_IN_PIXELS","toPercentages","PERCENTAGE","toPixels","PIXEL","global","math","ResizingUtils","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TABLE","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","draggableElement","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","TBODY","TH","TR","WIDTH","column","handleWidth","borderOffset","mousePosition","tableBody","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnWidth","columnLeftOffset","adjacentColumnWidth","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","tableBodyWidth","currentColumnsWidths","topAndBottomColumns","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowPosition","tableBodyTopOffset","currentRowHeight","initialTableHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","HandlePositioningStrategy","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","HandleDraggingStrategy","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","TableResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","isUndefined","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","TABLE_RESIZING_CLASS","COLUMN","ROW","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_getMaxDimensionValue","_initialElementWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","_hasRowsInPixels","_initialElementHeight","dimension","dimensionLowercase","parentDimension","parentScrollOffset","isWidthInPercentages","parentColumn","columnsLength","_initResizeHandles","_showResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_onResizeHandleDrag","_onResizeHandleDragEnd","_onResizeHandleMouseOver","_onResizeHandleMouseOut","TableResizingFactory","factory","eventTarget","eventCurrentTarget","isResizeHandleOrChild","cellsFormatFinder","reUnit","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","rowIndex","cellsLength","newRowsCount","cellIndex","cellProp","tableRows","tableProp","tableProperties","collection","_deleteTableRows","insertRow","_insertCells","deleteCell","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","cellsWithHeaders","cellsWithHeadersAssociated","associateCellsWithHeader","_isHeadingRow","associate","nextRow","isDataRow","timestamp","Date","getTime","ids","generateIds","modifySellsIds","modifyCellsHeadings","isHeadingRow","associatedCells","headingIds","headersAttr","insertCell","rowParent","cellPropToAll","createTBody","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","align","tStyle","captionClone","tableAlignment","tableJson","_getAlignment","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","vAlign","hAlign","unit","TableWizardEditTool","numericTextBoxSettings","borderStyles","tableAlignmentDropDownSettings","valueTemplate","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","okHandler","collectDialogValues","tableData","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents"],"mappings":"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","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var SELECT = 'select';\n        var SELECT_OVERLAY_SELECTOR = 'select.k-select-overlay';\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"4\" cellpadding=\"0\" class=\"k-widget k-editor k-header\" role=\"presentation\"><tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-editor-toolbar\" role=\"toolbar\" /></td></tr>' + '<tr><td class=\"k-editable-area\" /></tr>' + '</tbody></table>',\n            buttonTemplate: '# var iconCssClass= \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '<a tabindex=\"0\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= iconCssClass #\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            colorPickerTemplate: '<div class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" class=\"#= data.cssClass #\" />',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" class=\"#= data.cssClass #\" /></span>',\n            separatorTemplate: '<span class=\"k-separator\" />',\n            overflowAnchorTemplate: '<a tabindex=\"0\" role=\"button\" class=\"k-tool k-overflow-anchor\" data-popup' + ' unselectable=\"on\" title=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' + '<span unselectable=\"on\" class=\"k-icon k-i-more-vertical\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            getToolCssClass: function (name) {\n                var toolCssClassNames = {\n                    superscript: 'sup-script',\n                    subscript: 'sub-script',\n                    justifyLeft: 'align-left',\n                    justifyCenter: 'align-center',\n                    justifyRight: 'align-right',\n                    justifyFull: 'align-justify',\n                    insertUnorderedList: 'list-unordered',\n                    insertOrderedList: 'list-ordered',\n                    'import': 'login',\n                    indent: 'indent-increase',\n                    outdent: 'indent-decrease',\n                    createLink: 'link-horizontal',\n                    unlink: 'unlink-horizontal',\n                    insertImage: 'image',\n                    insertFile: 'file-add',\n                    viewHtml: 'html',\n                    foreColor: 'foreground-color',\n                    backColor: 'paint',\n                    createTable: 'table-insert',\n                    addColumnLeft: 'table-column-insert-left',\n                    addColumnRight: 'table-column-insert-right',\n                    addRowAbove: 'table-row-insert-above',\n                    addRowBelow: 'table-row-insert-below',\n                    deleteRow: 'table-row-delete',\n                    deleteColumn: 'table-column-delete',\n                    tableWizard: 'table-properties',\n                    tableWizardInsert: 'table-wizard',\n                    cleanFormatting: 'clear-css'\n                };\n                var cssClass = toolCssClassNames[name];\n                if (cssClass) {\n                    return cssClass;\n                }\n                return name;\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + EditorUtils.getToolCssClass(toolName);\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            },\n            cacheComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace(comments[index], '{' + index + '}');\n                }\n                return content;\n            },\n            retrieveComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace('{' + index + '}', comments[index]);\n                }\n                return content;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            overflowAnchor: 'More tools',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            fileText: 'Text',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogOk: 'Ok',\n            dialogCancel: 'Cancel',\n            cleanFormatting: 'Clean formatting',\n            createTable: 'Create a table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column',\n            tableWizard: 'Table Wizard',\n            tableTab: 'Table',\n            cellTab: 'Cell',\n            accessibilityTab: 'Accessibility',\n            caption: 'Caption',\n            summary: 'Summary',\n            width: 'Width',\n            height: 'Height',\n            units: 'Units',\n            cellSpacing: 'Cell Spacing',\n            cellPadding: 'Cell Padding',\n            cellMargin: 'Cell Margin',\n            alignment: 'Alignment',\n            background: 'Background',\n            cssClass: 'CSS Class',\n            id: 'ID',\n            border: 'Border',\n            borderStyle: 'Border Style',\n            collapseBorders: 'Collapse borders',\n            wrapText: 'Wrap text',\n            associateCellsWithHeaders: 'Associate cells with headers',\n            alignLeft: 'Align Left',\n            alignCenter: 'Align Center',\n            alignRight: 'Align Right',\n            alignLeftTop: 'Align Left Top',\n            alignCenterTop: 'Align Center Top',\n            alignRightTop: 'Align Right Top',\n            alignLeftMiddle: 'Align Left Middle',\n            alignCenterMiddle: 'Align Center Middle',\n            alignRightMiddle: 'Align Right Middle',\n            alignLeftBottom: 'Align Left Bottom',\n            alignCenterBottom: 'Align Center Bottom',\n            alignRightBottom: 'Align Right Bottom',\n            alignRemove: 'Remove Alignment',\n            columns: 'Columns',\n            rows: 'Rows',\n            selectAllCells: 'Select All Cells',\n            exportAs: 'Export As',\n            'import': 'Import'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'tableWizard',\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type, comments;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (that.options.encoded && $.trim(domElement.defaultValue).length) {\n                        value = domElement.defaultValue;\n                    }\n                    comments = dom.getAllComments($('<div></div>').html(value)[0]);\n                    value = EditorUtils.cacheComments(value, comments);\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                    value = EditorUtils.retrieveComments(value, comments);\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || kendo.ui.editor.emptyElementContent);\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function (e) {\n                        that._mouseup(e);\n                    }\n                });\n                that._initializeImmutables();\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-i-arrow-45-down-right\\' /></div>').insertAfter(this.textarea);\n                    this.wrapper.addClass('k-resizable');\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n            _initializeTableResizing: function () {\n                var editor = this;\n                kendo.ui.editor.TableResizing.create(editor);\n                editor._showTableResizeHandlesProxy = proxy(editor._showTableResizeHandles, editor);\n                editor.bind(SELECT, editor._showTableResizeHandlesProxy);\n            },\n            _destroyTableResizing: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.destroy();\n                    editor.tableResizing = null;\n                }\n                if (editor._showTableResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showTableResizeHandlesProxy);\n                }\n            },\n            _showTableResizeHandles: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.showResizeHandles();\n                }\n            },\n            _initializeColumnResizing: function () {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n            _destroyColumnResizing: function () {\n                var editor = this;\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n            _initializeRowResizing: function () {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n            _destroyRowResizing: function () {\n                var editor = this;\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                    iframe.src = src;\n                }\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                doc.open();\n                doc.write('<!DOCTYPE html><html><head>' + '<meta charset=\\'utf-8\\' />' + '<style>' + 'html,body{padding:0;margin:0;height:100%;min-height:100%;}' + 'body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + (browser.msie || browser.edge ? 'height:auto;' : '') + (os.ios ? 'word-break:break-all;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table p{margin:0;padding:0;}' + '.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}' + '.k-column-resize-handle {width: 100%; height: 100%;}' + '.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}' + '.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}' + '.k-row-resize-handle {display: table; width: 100%; height: 100%;}' + '.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}' + '.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}' + '.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}' + '.k-table-resize-handle {width: 100%; height: 100%;}' + '.k-table-resize-handle.k-resize-east{cursor:e-resize;}' + '.k-table-resize-handle.k-resize-north{cursor:n-resize;}' + '.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}' + '.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}' + '.k-table-resize-handle.k-resize-south{cursor:s-resize;}' + '.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}' + '.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}' + '.k-table-resize-handle.k-resize-west{cursor:w-resize;}' + '.k-table.k-table-resizing{opacity:0.6;}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                    if (textarea) {\n                        textarea.trigger('change');\n                    }\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var editor = this;\n                var NS = '.kendoEditor';\n                var eventNames;\n                var i;\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        eventNames = kendo.applyEventMap(type).split(' ');\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    if (!doc.body) {\n                        var body = doc.createElement('body');\n                        body.setAttribute('contenteditable', 'true');\n                        body.setAttribute('autocorrect', 'off');\n                        doc.getElementsByTagName('html')[0].appendChild(body);\n                        var interval = setInterval(function () {\n                            if ($(editor.document).find('body').length > 1) {\n                                $(editor.document).find('body:last').remove();\n                                window.clearInterval(interval);\n                            }\n                        }, 10);\n                    }\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                editor._registerHandler(mousedownTrigger, 'down', proxy(editor._mousedown, editor));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._spellCorrect(editor);\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == '\\uFEFF') {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showTableResizeHandles();\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            keys.BACKSPACE,\n                            keys.TAB,\n                            keys.PAGEUP,\n                            keys.PAGEDOWN,\n                            keys.END,\n                            keys.HOME,\n                            keys.LEFT,\n                            keys.UP,\n                            keys.RIGHT,\n                            keys.DOWN,\n                            keys.INSERT,\n                            keys.DELETE\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            editor._selectionChange();\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste drop dragover': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n                            if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                        }, 10);\n                    }\n                });\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            },\n            _initializeImmutables: function () {\n                var that = this, editorNS = kendo.ui.editor;\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n            _mousedown: function (e) {\n                var editor = this;\n                editor._selectionStarted = true;\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n                if (browser.gecko) {\n                    return;\n                }\n                var target = $(e.target);\n                if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target.is('a[href]')) {\n                    window.open(target.attr('href'), '_new');\n                }\n            },\n            _mouseup: function (e) {\n                var that = this;\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that._destroyResizings();\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial,Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\\'Courier New\\',Courier,monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia,serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact,Charcoal,sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\\'Lucida Console\\',Monaco,monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma,Geneva,sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\\'Times New Roman\\',Times,serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\\'Trebuchet MS\\',Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana,Geneva,sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var editor = this;\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                editor._destroyUploadWidget();\n                editor._destroyResizings();\n                kendo.destroy(this.wrapper);\n            },\n            _destroyResizings: function () {\n                var editor = this;\n                editor._destroyTableResizing();\n                kendo.ui.editor.TableResizing.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            _destroyUploadWidget: function () {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n                if (iframe) {\n                    if (activeElement != body && activeElement != iframe) {\n                        scrollTop = documentElement.scrollTop;\n                        body.focus();\n                        documentElement.scrollTop = scrollTop;\n                    }\n                } else {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            _containsRange: function (range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) && dom.isAncestorOrSelf(body, range.endContainer);\n            },\n            _deleteSavedRange: function () {\n                if ('_range' in this) {\n                    delete this._range;\n                }\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({\n                            range: range,\n                            body: that.body,\n                            immutables: !!that.immutables\n                        }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            },\n            execCommand: function (command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n                command.editor = this;\n                command.exec();\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title\n                });\n                ui.children('.k-tool-text').html(options.title);\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\n        var emptyElementContent = '\\uFEFF';\n        var emptyTableCellContent = emptyElementContent;\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = '&nbsp;';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                _bomFill: bomFill,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getAllComments: function (rootElem) {\n                var comments = [];\n                var iterator = document.createNodeIterator(rootElem, NodeFilter.SHOW_COMMENT, function () {\n                    return NodeFilter.FILTER_ACCEPT;\n                }, false);\n                var curNode = iterator.nextNode();\n                while (curNode) {\n                    comments.push(curNode.nodeValue);\n                    curNode = iterator.nextNode();\n                }\n                return comments;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            nodeTypes: {\n                ELEMENT_NODE: 1,\n                ATTRIBUTE_NODE: 2,\n                TEXT_NODE: 3,\n                CDATA_SECTION_NODE: 4,\n                ENTITY_REFERENCE_NODE: 5,\n                ENTITY_NODE: 6,\n                PROCESSING_INSTRUCTION_NODE: 7,\n                COMMENT_NODE: 8,\n                DOCUMENT_NODE: 9,\n                DOCUMENT_TYPE_NODE: 10,\n                DOCUMENT_FRAGMENT_NODE: 11,\n                NOTATION_NODE: 12\n            },\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            isBom: function (node) {\n                return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (Dom.isBom(node)) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node);\n            },\n            tableCell: function (node) {\n                return Dom.is(node, 'td') || Dom.is(node, 'th');\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (Dom.emptyTextNode(child)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyTextNode: function (node) {\n                return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return node && Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            allWhitespaceContent: function (node) {\n                var child = node.firstChild;\n                while (child && Dom.isWhitespace(child)) {\n                    child = child.nextSibling;\n                }\n                return !child;\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            htmlIndentSpace: function (node) {\n                if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                    return false;\n                }\n                if (emptyspace.test(node.nodeValue)) {\n                    return true;\n                }\n                var sibling = function (el, direction) {\n                    while (el[direction]) {\n                        el = el[direction];\n                        if (Dom.significantNodes([el]).length > 0) {\n                            return el;\n                        }\n                    }\n                };\n                var parent = node.parentNode;\n                var prev = sibling(node, 'previousSibling');\n                var next = sibling(node, 'nextSibling');\n                if (bom.test(node.nodeValue)) {\n                    return !!(prev || next);\n                }\n                if ($(parent).is('tr,tbody,thead,tfoot,table,ol,ul')) {\n                    return true;\n                }\n                if (Dom.isBlock(parent) || Dom.is(parent, 'body')) {\n                    var isPrevBlock = prev && Dom.isBlock(prev);\n                    var isNextBlock = next && Dom.isBlock(next);\n                    if (!next && isPrevBlock || !prev && isNextBlock || isPrevBlock && isNextBlock) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            isBr: function (node) {\n                return Dom.name(node) == 'br';\n            },\n            list: function (node) {\n                var name = node ? Dom.name(node) : '';\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node, toStart) {\n                var doc = node.ownerDocument;\n                var wnd = Dom.windowFromDocument(doc);\n                var windowHeight = wnd.innerHeight;\n                var scrollContainer = Dom.scrollContainer(doc);\n                var element, elementTop, elementHeight, marker;\n                if (Dom.isDataNode(node)) {\n                    if (toStart) {\n                        marker = Dom.create(doc, 'span', { 'innerHTML': '&#xfeff;' });\n                        Dom.insertBefore(marker, node);\n                        element = $(marker);\n                    } else {\n                        element = $(node.parentNode);\n                    }\n                } else {\n                    element = $(node);\n                }\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (toStart || !elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (marker) {\n                    Dom.remove(marker);\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            offset: function (target, offsetParent) {\n                var result = {\n                    top: target.offsetTop,\n                    left: target.offsetLeft\n                };\n                var parent = target.offsetParent;\n                while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                    result.top += parent.offsetTop;\n                    result.left += parent.offsetLeft;\n                    parent = parent.offsetParent;\n                }\n                return result;\n            },\n            restoreScrollTop: function (doc) {\n                if (typeof persistedScrollTop == 'number') {\n                    Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                }\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                if (node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            removeChildren: function (node) {\n                while (node.firstChild) {\n                    node.removeChild(node.firstChild);\n                }\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (!Dom.isEmpty(node) && node.childNodes.length === 0 || Dom.isBlock(node) && Dom.allWhitespaceContent(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tag) {\n                while (node && Dom.name(node) != tag) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            closestBy: function (node, condition, rootCondition) {\n                while (node && !condition(node)) {\n                    if (rootCondition && rootCondition(node)) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            wrapper: function (node) {\n                var wrapper = Dom.closestBy(node, function (el) {\n                    return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n                });\n                return $(wrapper).is('body,.k-editor') ? undefined : wrapper;\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            createEmptyNode: function (document, tagName, attributes) {\n                var node = Dom.attr(document.createElement(tagName), attributes);\n                node.innerHTML = '\\uFEFF';\n                return node;\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color') || '';\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = $.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types) && !$(editable).is('.k-editor')) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var filterFn = function (node) {\n                    return Dom.name(node) == tagName;\n                };\n                return Dom.filterBy(nodes, filterFn, invert);\n            },\n            filterBy: function (nodes, condition, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var match;\n                for (; i < len; i++) {\n                    match = condition(nodes[i]);\n                    if (match && !invert || !match && invert) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var br = '<br class=\"k-br\">';\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = $.isFunction;\n        var TD = 'td';\n        var Serializer = {\n            toEditableHtml: function (html) {\n                return (html || '').replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _toEditableImmutables: function (body) {\n                var immutable = Editor.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\n                            node = node.firstChild;\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            if (dom.is(node, 'td')) {\n                                node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                            } else {\n                                node.innerHTML = kendo.ui.editor.emptyElementContent;\n                            }\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    var attributesToRemove = [];\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            attributesToRemove.push(name);\n                        }\n                    }\n                    for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                        this.removeAttribute(attributesToRemove[i]);\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var legacyIE = msie && browser.version < 9;\n                var originalSrc = 'originalsrc';\n                var originalHref = 'originalhref';\n                var o = options || {};\n                var immutables = o.immutables;\n                html = Serializer.toEditableHtml(html);\n                if (legacyIE) {\n                    html = '<br/>' + html;\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\n                }\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (immutables) {\n                    immutables.deserialize(root);\n                }\n                if (legacyIE) {\n                    dom.remove(root.firstChild);\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\n                        var node = this;\n                        if (node[originalHref]) {\n                            node.setAttribute('href', node[originalHref]);\n                            node.removeAttribute(originalHref);\n                        }\n                        if (node[originalSrc]) {\n                            node.setAttribute('src', node[originalSrc]);\n                            node.removeAttribute(originalSrc);\n                        }\n                    });\n                } else if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                Serializer._toEditableImmutables(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                var immutables = options && options.immutables;\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                function mapStart(node, tag) {\n                    result.push('<' + tag);\n                    attr(node);\n                    result.push('>');\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            mapStart(node, 'iframe');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            mapStart(node, 'script');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'b');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'i');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'strong');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'em');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span');\n                            var attributes = specifiedAttributes(node);\n                            var style = $(attributes).filter(function (i, item) {\n                                return item.name == 'style';\n                            })[0];\n                            var styleObj = {\n                                nodeName: 'style',\n                                value: 'text-decoration:underline;'\n                            };\n                            if (style) {\n                                styleObj.value = style.value;\n                                if (!/text-decoration/i.test(styleObj.value)) {\n                                    styleObj.value = 'text-decoration:underline;' + styleObj.value;\n                                }\n                                attributes.splice($.inArray(style, attributes), 1);\n                            }\n                            attributes.push(styleObj);\n                            attr(node, attributes);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = $.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, 'tr') || dom.is(node, 'td'))) {\n                            specified = false;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (dom.isBom(node)) {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, TD) && node.childNodes.length === 1) {\n                                return true;\n                            }\n                            if (node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous, jqNode;\n                    if (immutables && Editor.Immutables.immutable(node)) {\n                        result.push(immutables.serialize(node));\n                    } else if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        jqNode = $(node);\n                        if (jqNode.hasClass('k-table-resize-handle-wrapper') || jqNode.hasClass('k-column-resize-handle-wrapper') || jqNode.hasClass('k-row-resize-handle-wrapper')) {\n                            return;\n                        }\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if ($.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/serializer'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth > 0) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/components'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                return new RangeIterator(this.getSubRange());\n            },\n            getSubRange: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return subRange;\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var ImmutablesRangeIterator = RangeIterator.extend({\n            hasPartialSubtree: function () {\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n            },\n            getSubtreeIterator: function () {\n                return new ImmutablesRangeIterator(this.getSubRange());\n            }\n        });\n        var ImmutablesRangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                    function visit(node) {\n                        if (immutable && !immutable(node)) {\n                            if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                                nodes.push(node);\n                            } else {\n                                node = node.firstChild;\n                                while (node) {\n                                    visit(node);\n                                    node = node.nextSibling;\n                                }\n                            }\n                        }\n                    }\n                    new ImmutablesRangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body, options) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n                that.immutables = options && options.immutables;\n                if (that.immutables) {\n                    that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n                }\n                that.html = that.body.innerHTML;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == 'false'))) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                var that = this;\n                dom.removeChildren(that.body);\n                that.body.innerHTML = that.html;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length--) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(caret);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                range.selectNode(caret);\n                return caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var isBomSelected = start === end && dom.isBom(start);\n                if (isBomSelected && start.length > 1) {\n                    start.nodeValue = start.nodeValue.charAt(0);\n                }\n                var collapsed = isBomSelected;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            editableTextNodes: function (range) {\n                var nodes = [], immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n                if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                    nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                }\n                return nodes;\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                if (browser.msie && browser.version < 9) {\n                    return new W3CRange(document);\n                }\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/immutables', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, dom = Editor.Dom, template = kendo.template, RangeUtils = Editor.RangeUtils, complexBlocks = [\n                'ul',\n                'ol',\n                'tbody',\n                'thead',\n                'table'\n            ], toolsToBeUpdated = [\n                'bold',\n                'italic',\n                'underline',\n                'strikethrough',\n                'superscript',\n                'subscript',\n                'forecolor',\n                'backcolor',\n                'fontname',\n                'fontsize',\n                'createlink',\n                'unlink',\n                'autolink',\n                'addcolumnleft',\n                'addcolumnright',\n                'addrowabove',\n                'addrowbelow',\n                'deleterow',\n                'deletecolumn',\n                'mergecells',\n                'formatting',\n                'cleanformatting'\n            ], IMMUTABALE = 'k-immutable', IMMUTABALE_MARKER_SELECTOR = '[' + IMMUTABALE + ']', IMMUTABLE_SELECTOR = '[contenteditable=\\'false\\']';\n        var rootCondition = function (node) {\n            return $(node).is('body,.k-editor');\n        };\n        var immutable = function (node) {\n            return node.getAttribute && node.getAttribute('contenteditable') == 'false';\n        };\n        var immutableParent = function (node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n        var expandImmutablesIn = function (range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n        var immutablesContext = function (range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var randomId = function (length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n        var removeImmutables = function (root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n            $(root).find(IMMUTABLE_SELECTOR).each(function (i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = '<' + nodeName + ' ' + IMMUTABALE + '=\\'' + id + '\\'></' + nodeName + '>';\n                serializedImmutables[id] = {\n                    node: node,\n                    style: $(node).attr('style')\n                };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n            return serializedImmutables;\n        };\n        var restoreImmutables = function (root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function (i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr('style')) {\n                    $(immutable.node).removeAttr('style').attr('style', immutable.style);\n                }\n            });\n        };\n        var deletingKey = function (keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function (tool) {\n            var options = tool ? tool.options : undefined;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n        var Immutables = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n            serialize: function (node) {\n                var result = this._toHtml(node), id;\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n            _toHtml: function (node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n                switch (serializationType) {\n                case 'string':\n                    return template(serialization)(node);\n                case 'function':\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return '<' + nodeName + '></' + nodeName + '>';\n                }\n            },\n            deserialize: function (node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function () {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n                that.serializedImmutables = {};\n            },\n            randomId: function (length) {\n                return randomId(length);\n            },\n            keydown: function (e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = isDeleting && this._cancelDeleting(e, range) || !isDeleting && this._cancelTyping(e, range);\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n            _cancelTyping: function (e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n                return range.collapsed && !keyboard.typingInProgress && keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n            _cancelDeleting: function (e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, 'li');\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, 'li');\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n            nextImmutable: function (range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || (forwards && RangeUtils.isEndOf(range, commonContainer) || !forwards && RangeUtils.isStartOf(range, commonContainer))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n            _removeImmutable: function (immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n            _nextNode: function (node, forwards) {\n                var sibling = forwards ? 'nextSibling' : 'previousSibling';\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n        Editor.Immutables = Immutables;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/command', ['editor/immutables'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, extend = $.extend;\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            expandImmutablesIn: function (range) {\n                if (this.immutables()) {\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    this.restorePoint = new RestorePoint(range, this.editor.body);\n                }\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = editorNS.EditorUtils;\n        var ToolTemplate = editorNS.ToolTemplate;\n        var Tool = editorNS.Tool;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible a.k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor:visible,' + '.k-tool-group:visible .k-widget.k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var toolNamesByCssClass = {\n            'k-i-sup-script': 'superscript',\n            'k-i-sub-script': 'subscript',\n            'k-i-align-left': 'justifyLeft',\n            'k-i-align-center': 'justifyCenter',\n            'k-i-align-right': 'justifyRight',\n            'k-i-align-justify': 'justifyFull',\n            'k-i-list-unordered': 'insertUnorderedList',\n            'k-i-list-ordered': 'insertOrderedList',\n            'k-i-login': 'import',\n            'k-i-indent-increase': 'indent',\n            'k-i-indent-decrease': 'outdent',\n            'k-i-link-horizontal': 'createLink',\n            'k-i-unlink-horizontal': 'unlink',\n            'k-i-image': 'insertImage',\n            'k-i-file-add': 'insertFile',\n            'k-i-html': 'viewHtml',\n            'k-i-foreground-color': 'foreColor',\n            'k-i-paint': 'backColor',\n            'k-i-table-insert': 'createTable',\n            'k-i-table-column-insert-left': 'addColumnLeft',\n            'k-i-table-column-insert-right': 'addColumnRight',\n            'k-i-table-row-insert-above': 'addRowAbove',\n            'k-i-table-row-insert-below': 'addRowBelow',\n            'k-i-table-row-delete': 'deleteRow',\n            'k-i-table-column-delete': 'deleteColumn',\n            'k-i-table-properties': 'tableWizard',\n            'k-i-table-wizard': 'tableWizardInsert',\n            'k-i-clear-css': 'cleanFormatting'\n        };\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                ui.attr({ unselectable: 'on' });\n                var toolbar = options.editor.toolbar;\n                ui.attr('aria-controls', options.editor.element.attr('id')).on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize();\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'indent',\n                    'outdent'\n                ],\n                tables: [\n                    'createTable',\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf',\n                    'exportAs',\n                    'import'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                var that = this;\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow k-header\\' />').parent().prepend('<button class=\\'k-button k-bare k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-handler-drag\\' /></button>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        that.preventPopupHide = true;\n                    }\n                }).on('focusout', function () {\n                    that.options.editor.element.focusout();\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('li').toggleClass('k-item k-state-default', show).find('.k-tool:not(.k-state-disabled),.k-overflow-button').toggleClass('k-overflow-button k-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: 'bottom right',\n                    position: 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                        ui.attr('aria-expanded', true);\n                    },\n                    close: function () {\n                        ui.attr('aria-expanded', false);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                return this.element.find('.k-state-focused').length > 0 || this.preventPopupHide || this.overflowPopup && this.overflowPopup.visible();\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'moreVertical' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset, browser = kendo.support.browser;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(outerWidth(editorElement) - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10));\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                            setTimeout(function () {\n                                window.open();\n                            }, 0);\n                        } else {\n                            window.open();\n                        }\n                    }\n                }\n            },\n            _overlaps: function (box) {\n                var toolbarWrapper = this.window.wrapper, toolbarWrapperOffset = toolbarWrapper.offset(), toolbarWrapperLeft = toolbarWrapperOffset.left, toolbarWrapperTop = toolbarWrapperOffset.top, boxOffset = box.offset(), boxOffsetLeft = boxOffset.left, boxOffsetTop = boxOffset.top;\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft || boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() || boxOffsetTop + box.height() < toolbarWrapperTop || boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-gear',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + options.name;\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result;\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return $.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    if (toolName == OVERFLOWANCHOR) {\n                        template.options.title = that.options.messages.overflowAnchor;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').addClass('k-button-group');\n                if (that.options.popup && browser.msie && browser.version < 9) {\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\n                }\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().each(function () {\n                    $(this).addClass('k-state-disabled');\n                    $(this).children().filter(function () {\n                        return !$(this).hasClass('k-state-disabled');\n                    }).removeClass('k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end().parent().removeClass('k-state-disabled').css('display', '');\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n            attachToolsEvents: function (element) {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled', dropdown = '.k-dropdown', colorpicker = '.k-colorpicker', editorTools = [\n                        buttons,\n                        dropdown,\n                        colorpicker\n                    ].join(',');\n                element.off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, editorTools, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function () {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement || $(focusElement).closest('.k-overflow-tools').css('visibility') === 'hidden') {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && $(current).is('a') && !$(current).attr('href')) {\n                        that._executeToolCommand(current, e);\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    that._executeToolCommand(this, e);\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _executeToolCommand: function (toolElement, e) {\n                var that = this;\n                var button = $(toolElement);\n                e.preventDefault();\n                e.stopPropagation();\n                button.removeClass('k-state-hover');\n                if (!button.is('[data-popup]')) {\n                    that._editor.exec(that._toolName(toolElement));\n                }\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolNamesByCssClass[toolname]) {\n                        toolname = toolNamesByCssClass[toolname];\n                    }\n                    if (toolname.indexOf('k-i-') >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf('k-i-') + 4));\n                    } else {\n                        return toolname.substring(toolname.lastIndexOf('-') + 1);\n                    }\n                }\n                return 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editor = that._editor, range = editor.getRange(), nodes = editorNS.RangeUtils.textNodes(range), immutables = editor.options.immutables, immutablesContext = that._immutablesContext(range);\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes);\n                        }\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n            _immutablesContext: function (range) {\n                if (this._editor.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n            _updateImmutablesState: function (tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n                if (trackImmutables) {\n                    var display = immutablesContext ? 'none' : '';\n                    if (!ui.is('.k-tool')) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css('display', display);\n                    var groupUi = uiElement.closest('li');\n                    if (groupUi.children(':visible').length === 0) {\n                        groupUi.css('display', display);\n                    }\n                }\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', outerWidth(group, true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.hide();\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous;\n                if (group.length && width > this._groupsWidth() + group.data('outerWidth')) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.show();\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.jQuery || window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/viewhtml', ['editor/command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, dom = Editor.Dom;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, options = editor.options, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), textarea = '.k-editor-textarea', content, comments;\n                options.serialization.immutables = editor.immutables;\n                comments = dom.getAllComments(editor.body);\n                content = EditorUtils.cacheComments(editor.value(), comments);\n                content = ViewHtmlCommand.indent(content);\n                content = EditorUtils.retrieveComments(content, comments);\n                options.serialization.immutables = undefined;\n                function apply(e) {\n                    options.deserialization.immutables = editor.immutables;\n                    editor.value(dialog.find(textarea).val());\n                    options.deserialization.immutables = undefined;\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    if (editor.immutables) {\n                        editor.immutables.serializedImmutables = {};\n                    }\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '<div class=\\'k-editor-dialog k-popup-edit-form k-viewhtml-dialog\\'>' + '<div class=\\'k-edit-form-container\\'></div>' + '<textarea class=\\'k-editor-textarea k-input\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/format', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, Tool = Editor.Tool, Command = Editor.Command, EditorUtils = Editor.EditorUtils;\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                var finder = options.formatter.finder;\n                if (finder && EditorUtils.formatByName('immutable', finder.format)) {\n                    finder._initOptions({ immutables: options.immutables });\n                }\n                Command.fn.init.call(this, options);\n            }\n        });\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        $.extend(Editor, {\n            FormatCommand: FormatCommand,\n            FormatTool: FormatTool\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/inlineformat', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, preventDefault = function (ev) {\n                ev.preventDefault();\n            }, MOUSEDOWN_NS = 'mousedown.kendoEditor', KEYDOWN_NS = 'keydown.kendoEditor', KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n                var nodes = textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                var attributes = this.attributes;\n                var styleAttr = attributes ? attributes.style || {} : {};\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.finder.findSuitable(node);\n                    if (formatNode) {\n                        if (dom.is(formatNode, 'font')) {\n                            if (styleAttr.color) {\n                                formatNode.removeAttribute('color');\n                            }\n                            if (styleAttr.fontName) {\n                                formatNode.removeAttribute('face');\n                            }\n                            if (styleAttr.fontSize) {\n                                formatNode.removeAttribute('size');\n                            }\n                        }\n                        dom.attr(formatNode, attributes);\n                    } else {\n                        while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true') {\n                            node = node.parentNode;\n                        }\n                        formatNode = this.wrap(node);\n                    }\n                    formatNodes.push(formatNode);\n                }\n                this.consolidate(formatNodes);\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = $.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, range, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        editor._range = range;\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    close: function () {\n                        setTimeout(function () {\n                            editor._deleteSavedRange();\n                        }, 0);\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                var widget = ui.data(this.type);\n                widget.value('inherit');\n                widget.wrapper.on(MOUSEDOWN_NS, '.k-select,.k-input', function () {\n                    var newRange = editor.getRange();\n                    range = editor._containsRange(newRange) ? newRange : range;\n                }).on(KEYDOWN_NS, function (e) {\n                    if (e.keyCode === kendo.keys.ENTER) {\n                        editor._deleteSavedRange();\n                        e.preventDefault();\n                    }\n                });\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette, columns = options.columns;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-icon k-i-' + EditorUtils.getToolCssClass(options.name),\n                    palette: palette,\n                    columns: columns,\n                    change: function () {\n                        var color = ui.value();\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        editor.focus();\n                    },\n                    open: function (e) {\n                        var picker = e.sender;\n                        picker.value(null);\n                        picker._popup.element.on(MOUSEDOWN_NS, preventDefault);\n                        if (!picker._popup.element.is('[unselectable=\\'on\\']')) {\n                            picker._popup.element.attr({ unselectable: 'on' }).find('*').attr('unselectable', 'on');\n                        }\n                    },\n                    close: function (e) {\n                        e.sender._popup.element.off(MOUSEDOWN_NS);\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*').attr('unselectable', 'on');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/link', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, editableTextNodes = RangeUtils.editableTextNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerHTML) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: function (range) {\n                        var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                        new InlineFormatter([{ tags: ['a'] }]).remove(nodes);\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                var that;\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.immutables = that && that.immutables();\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerHTML: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                this.formatter.immutables = this.immutables();\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = textInput.val();\n                        if (!text && !this._initialText) {\n                            this.attributes.innerHTML = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerHTML = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var startNode = range.startContainer;\n                var startOffset = range.startOffset;\n                var prev = startNode.previousSibling;\n                if (!prev && (dom.isBom(startNode) && !startNode.nextSibling || !startOffset && dom.isDataNode(startNode))) {\n                    startNode = startNode.parentNode;\n                    startOffset = 0;\n                }\n                var traverser = new LeftDomTextTraverser({\n                    node: startNode,\n                    offset: startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatblock', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                this._resolveListsItems(suitable);\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            _resolveListsItems: function (nodes) {\n                var i, node, wrapper;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    wrapper = dom.is(node, 'li') ? node : dom.wrapper(node);\n                    wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                    if (dom.is(wrapper, 'li')) {\n                        node = nodes[i] = wrapper;\n                    }\n                }\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                var immutables = this.options && this.options.immutables;\n                var ImmutablesNS = Editor.Immutables;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (immutables && tags && tags[0] == 'immutable') {\n                        var immutable = ImmutablesNS.immutableParent(node);\n                        if (immutable && dom.attrEquals(immutable, attributes)) {\n                            return node;\n                        }\n                    }\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                this._handleImmutables(nodes, true);\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            _handleImmutables: function (nodes, applyFormatting) {\n                if (!this.immutables()) {\n                    return;\n                }\n                var immutableFormat = EditorUtils.formatByName('immutable', this.format);\n                if (!immutableFormat) {\n                    return;\n                }\n                var ImmutablesNS = Editor.Immutables;\n                var l = nodes.length - 1;\n                for (var i = l; i >= 0; i--) {\n                    var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                    if (!immutableParent) {\n                        continue;\n                    }\n                    if (immutableParent !== nodes[i + 1]) {\n                        if (applyFormatting) {\n                            dom.attr(immutableParent, immutableFormat.attr);\n                        } else {\n                            dom.unstyle(immutableParent, immutableFormat.attr.style);\n                        }\n                    }\n                    nodes.splice(i, 1);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                this._handleImmutables(nodes, false);\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        if (name == 'div' && !formatNode.getAttribute('class')) {\n                            dom.unwrap(formatNode);\n                        } else {\n                            namedFormat = EditorUtils.formatByName(name, this.format);\n                            if (namedFormat.attr.style) {\n                                dom.unstyle(formatNode, namedFormat.attr.style);\n                            }\n                            if (namedFormat.attr.className) {\n                                dom.removeClass(formatNode, namedFormat.attr.className);\n                            }\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                var block;\n                var immutalbeParent;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        block = blocks[i];\n                        immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n                        if (!immutalbeParent) {\n                            tagName = dom.name(block);\n                            if (tagName == 'li') {\n                                list = block.parentNode;\n                                formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                                range = this.editor.createRange();\n                                range.selectNode(blocks[i]);\n                                formatter.toggle(range);\n                            } else if (formatTag && (tagName == 'td' || block.attributes.contentEditable)) {\n                                new BlockFormatter(format, this.values).apply(block.childNodes);\n                            } else {\n                                element = dom.changeTag(block, formatTag);\n                                dom.attr(element, format[0].attr);\n                            }\n                        }\n                    }\n                } else {\n                    var blockFormatter = new BlockFormatter(format, this.values);\n                    blockFormatter.editor = this.editor;\n                    blockFormatter.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/lists', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (tag) {\n                this.tag = tag;\n                var tags = this.tags = [\n                    tag == 'ul' ? 'ol' : 'ul',\n                    tag\n                ];\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i]);\n                    if (formatNode && dom.name(formatNode) == this.tag) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0]);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (tag, unwrapTag) {\n                var that = this;\n                that.finder = new ListFormatFinder(tag);\n                that.tag = tag;\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            immutables: function () {\n                return this.editor && !!this.editor.options.immutables;\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node, isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        if (!isImmutable(node)) {\n                            dom.unwrap(node);\n                        }\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.finder.findSuitable(nodes);\n                if (!formatNode) {\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\n                }\n                var childNodes;\n                if (/table|tbody/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.children, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                while (dom.isBom(formatNode.nextSibling)) {\n                    dom.remove(formatNode.nextSibling);\n                }\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section, node, l = nodes.length, immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n                function addLastSection() {\n                    if (lastSection) {\n                        sections.push({\n                            section: lastSection,\n                            nodes: lastNodes\n                        });\n                    }\n                }\n                for (i = 0; i < l; i++) {\n                    node = immutableParent(nodes[i]) || nodes[i];\n                    section = dom.closestEditable(node, [\n                        'td',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        addLastSection();\n                        lastNodes = [node];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(node);\n                    }\n                }\n                addLastSection();\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter(options.tag);\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatting', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var that = this;\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        formatter.editor = that.editor;\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                that.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    var node = nodes[c];\n                    if (!this.immutableParent(node)) {\n                        this.clean(node);\n                    }\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/image', [\n        'kendo.imagebrowser',\n        'editor/command'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(element.find('.k-imagebrowser'), extend({}, imageBrowser));\n                    this._imageBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORIMAGEURL).val(this.value());\n                        }\n                    });\n                    this._imageBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/import', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n        var ImportCommand = Command.extend({\n            exec: function () {\n                (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n            },\n            _initializeUploadWidget: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var importOptions = editor.options['import'];\n                var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                    success: proxy(cmd._onUploadSuccess, cmd),\n                    progress: proxy(cmd._onUploadProgress, cmd),\n                    select: proxy(cmd._onUploadSelect, cmd),\n                    error: proxy(cmd._onUploadError, cmd),\n                    complete: proxy(cmd._onUploadComplete, cmd),\n                    showFileList: false,\n                    multiple: false,\n                    async: {\n                        saveUrl: importOptions.proxyUrl,\n                        autoUpload: true,\n                        saveField: 'file'\n                    },\n                    validation: {\n                        allowedExtensions: importOptions.allowedExtensions,\n                        maxFileSize: importOptions.maxFileSize\n                    }\n                }).getKendoUpload();\n                editor._uploadWidget = upload;\n                return upload;\n            },\n            _onUploadComplete: function (ev) {\n                this._trigger('complete', ev);\n                ev.sender.clearAllFiles();\n                this._removeLoadingOverlay();\n            },\n            _onUploadSuccess: function (ev) {\n                this.editor.value(ev.response.html.replace(/<\\/?body>/gi, ''));\n                this._trigger('success', ev);\n            },\n            _onUploadProgress: function (ev) {\n                this._trigger('progress', ev);\n            },\n            _onUploadSelect: function (ev) {\n                this._trigger('select', ev);\n                if (!ev.files[0].validationErrors) {\n                    this._initLoadingOverlay();\n                }\n            },\n            _onUploadError: function (ev) {\n                this._trigger('error', ev);\n            },\n            _trigger: function (eventType, uploadEvent) {\n                var editor = this.editor;\n                var importOptions = editor.options['import'];\n                if (typeof importOptions[eventType] === 'function') {\n                    importOptions[eventType].call(editor, uploadEvent);\n                }\n            },\n            _initLoadingOverlay: function () {\n                var editable = this.editor.body;\n                if (Editor.Dom.is(editable, 'body')) {\n                    this._iframeWrapper = this._container = this.editor.wrapper.find('iframe').parent().css({ position: 'relative' }).append(loadingOverlay);\n                } else {\n                    this._container = $(editable).append(loadingOverlay);\n                }\n                kendo.ui.progress(this._container, true);\n            },\n            _removeLoadingOverlay: function () {\n                kendo.ui.progress(this._container, false);\n                $(this._iframeWrapper).css({ position: '' });\n                delete this._container;\n                delete this._iframeWrapper;\n            }\n        });\n        extend(Editor, { ImportCommand: ImportCommand });\n        registerTool('import', new Tool({\n            command: ImportCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Import'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/insert', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, GenericCommand = editorNS.GenericCommand, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, extend = $.extend;\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        extend(editorNS, {\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/export', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, defaultExportAsItems = [\n                {\n                    text: 'Docx',\n                    value: 'docx'\n                },\n                {\n                    text: 'Rtf',\n                    value: 'rtf'\n                },\n                {\n                    text: 'Pdf',\n                    value: 'pdf'\n                },\n                {\n                    text: 'Html',\n                    value: 'html'\n                },\n                {\n                    text: 'Plain Text',\n                    value: 'txt'\n                }\n            ];\n        var ExportAsCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.exportType = options.exportType;\n            },\n            exec: function () {\n                var cmd = this;\n                var range = this.lockRange(true);\n                cmd.postToProxy();\n                cmd.releaseRange(range);\n            },\n            postToProxy: function () {\n                this.generateForm().appendTo('body').submit().remove();\n            },\n            generateForm: function () {\n                var cmd = this;\n                var exportAsOptions = cmd.editor.options.exportAs;\n                var form = $('<form>').attr({\n                    action: exportAsOptions && exportAsOptions.proxyURL || '',\n                    method: 'POST'\n                });\n                form.append([\n                    cmd.valueInput(),\n                    cmd.exportTypeInput(),\n                    cmd.fileNameInput()\n                ]);\n                return form;\n            },\n            valueInput: function () {\n                var editor = this.editor;\n                return $('<input>').attr({\n                    value: editor.encodedValue(),\n                    name: 'value',\n                    type: 'hidden'\n                });\n            },\n            exportTypeInput: function () {\n                var cmd = this;\n                return $('<input>').attr({\n                    value: cmd.exportType,\n                    name: 'exportType',\n                    type: 'hidden'\n                });\n            },\n            fileNameInput: function () {\n                var editor = this.editor;\n                var exportAsOptions = editor.options.exportAs;\n                var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr('id') || 'editor';\n                return $('<input>').attr({\n                    value: fileName,\n                    name: 'fileName',\n                    type: 'hidden'\n                });\n            }\n        });\n        var ExportAsTool = Tool.extend({\n            init: function (options) {\n                var tool = this;\n                Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n                tool.type = 'kendoSelectBox';\n            },\n            options: {\n                items: defaultExportAsItems,\n                width: 115\n            },\n            command: function (args) {\n                var value = args.value;\n                return new Editor.ExportAsCommand({\n                    range: args.range,\n                    exportType: value.exportType\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var tool = this;\n                var editor = initOptions.editor;\n                var options = tool.options;\n                var toolName = options.name;\n                var changeHandler = proxy(tool.changeHandler, tool);\n                var dataSource = options.items || editor.options[toolName];\n                dataSource.unshift({\n                    text: editor.options.messages[toolName],\n                    value: ''\n                });\n                tool.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    autoSize: true,\n                    change: changeHandler,\n                    open: function (e) {\n                        var sender = e.sender;\n                        sender.items()[0].style.display = 'none';\n                        sender.unbind('open');\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            changeHandler: function (e) {\n                var sender = e.sender;\n                var dataItem = sender.dataItem();\n                var value = dataItem && dataItem.value;\n                this._exec(value);\n                sender.value('');\n            },\n            _exec: function (value) {\n                if (value) {\n                    Tool.exec(this.editor, this.options.name, { exportType: value });\n                }\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        extend(Editor, {\n            ExportAsTool: ExportAsTool,\n            ExportAsCommand: ExportAsCommand\n        });\n        registerTool('exportAs', new ExportAsTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Export As'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/indent', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                formatNodes = this.mapImmutables(formatNodes);\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            mapImmutables: function (nodes) {\n                if (!this.immutables) {\n                    return nodes;\n                } else {\n                    var immutables = [];\n                    return $.map(nodes, function (node) {\n                        var immutable = Editor.Immutables.immutableParent(node);\n                        if (immutable) {\n                            if ($.inArray(immutable, immutables) === -1) {\n                                immutables.push(immutable);\n                            } else {\n                                return null;\n                            }\n                        }\n                        return immutable || node;\n                    });\n                }\n            },\n            remove: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                formatNodes = this.mapImmutables(formatNodes);\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.apply(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.remove(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                $.extend(this.options, { immutables: options.editor && options.editor.options.immutables });\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitableNodes = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n                for (i = 0, len = suitableNodes.length; i < len; i++) {\n                    suitable = suitableNodes[i];\n                    if (this.options.immutables) {\n                        immutableParent = Editor.Immutables.immutableParent(suitable);\n                        if (immutableParent) {\n                            suitable = immutableParent;\n                        }\n                    }\n                    isOutdentable = indent(suitable);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable, 'li') && (listParentsCount > 1 || indent(suitable.parentNode)) || dom.ofType(suitable, [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/linebreak', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        var startNode = focusNode.firstChild || focusNode;\n                        if (dom.isDataNode(startNode)) {\n                            range.setStart(startNode, 0);\n                        } else {\n                            range.setStartBefore(startNode);\n                        }\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, tableNode, rng, shouldTrim;\n                this.expandImmutablesIn(range);\n                shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (dom.next(li)) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        var br = $('br', li);\n                        if (br.length == 1) {\n                            br.remove();\n                        }\n                        var parentNode = li.parentNode;\n                        var parentChildrenLength = li.parentNode.children.length;\n                        var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n                        dom.insertAfter(paragraph, parentNode);\n                        dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n                        if (firstChild && firstChild !== marker) {\n                            paragraph.appendChild(firstChild);\n                            paragraph.appendChild(marker);\n                        } else {\n                            paragraph.innerHTML = emptyParagraphContent;\n                        }\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = this._insertParagraphAfter(heading);\n                    dom.remove(marker);\n                    next = paragraph;\n                } else if (tableNode) {\n                    paragraph = this._insertParagraphAfter(tableNode);\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous, { links: true });\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next, true);\n                RangeUtils.selectRange(range);\n            },\n            _insertParagraphAfter: function (node) {\n                var range = this.getRange();\n                var doc = RangeUtils.documentFromRange(range);\n                var emptyElementContent = editorNS.emptyElementContent;\n                var paragraph = dom.create(doc, 'p');\n                dom.insertAfter(paragraph, node);\n                paragraph.innerHTML = emptyElementContent;\n                return paragraph;\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                this.expandImmutablesIn(range);\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var node = range.startContainer;\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                var tableNode = dom.is(node, 'table') && node;\n                range.deleteContents();\n                if (tableNode) {\n                    dom.insertAfter(br, tableNode);\n                } else {\n                    range.insertNode(br);\n                }\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br, true);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/file', [\n        'kendo.filebrowser',\n        'editor/plugins/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETEXT = '#k-editor-file-text', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        file.title = attributes.title;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-text\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETEXT).val(), title = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href,\n                        title: title\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETEXT).val(file ? file.innerText : '').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(element.find('.k-filebrowser'), extend({}, fileBrowser));\n                    that._fileBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORFILEURL).val(this.value());\n                        }\n                    });\n                    that._fileBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/tables', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool, getTouches = kendo.getTouches;\n        var template = kendo.template;\n        var columnTemplate = '<td style=\\'width:#=width#%;\\'>#=content#</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: ['table'] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            init: function (options) {\n                var o = $.extend({\n                    postProcess: this.postProcess,\n                    skipCleaners: true\n                }, options || {});\n                InsertHtmlCommand.fn.init.call(this, o);\n            },\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                var columnHtml = template(columnTemplate)({\n                    width: 100 / columns,\n                    content: Editor.emptyTableCellContent\n                });\n                var rowHeight = 100 / rows;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr style=\\'height:' + rowHeight + '%;\\'>' + new Array(columns + 1).join(columnHtml) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find('td')[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                var editor = this._editor = options.editor;\n                this._popup = popup;\n                var tableWizard = new Editor.TableWizardTool({\n                    template: new ToolTemplate({\n                        template: EditorUtils.buttonTemplate,\n                        title: editor.options.messages.tableWizard\n                    }),\n                    command: Editor.TableWizardCommand,\n                    insertNewTable: true\n                });\n                registerTool('tableWizardInsert', tableWizard);\n                var twTool = $('<div class=\\'k-editor-toolbar\\'>' + tableWizard.options.template.getHtml() + '</div>');\n                twTool.appendTo(popup.element);\n                if (editor.toolbar) {\n                    editor.toolbar.attachToolsEvents(twTool);\n                }\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\' />') + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', function () {\n                    that._setTableSize();\n                }).on('down', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.createTable);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.createTable).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            }\n        });\n        var InsertRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = range.endContainer, cellCount, row, newRow;\n                while (dom.name(td) != 'td') {\n                    td = td.parentNode;\n                }\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                row = td.parentNode;\n                cellCount = row.children.length;\n                newRow = row.cloneNode(true);\n                for (var i = 0; i < row.cells.length; i++) {\n                    newRow.cells[i].innerHTML = Editor.emptyTableCellContent;\n                }\n                if (this.options.position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                this.releaseRange(range);\n            }\n        });\n        var InsertColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), columnIndex, i, rows = table.rows, cell, newCell, position = this.options.position;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                columnIndex = dom.findNodeIndex(td, true);\n                for (i = 0; i < rows.length; i++) {\n                    cell = rows[i].cells[columnIndex];\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyTableCellContent;\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                }\n                this.releaseRange(range);\n            }\n        });\n        var DeleteRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest('tr')[0];\n                });\n                var row = rows[0];\n                if (this.immutables() && Editor.Immutables.immutableParent(row)) {\n                    return;\n                }\n                var table = dom.closest(row, 'table');\n                var focusElement;\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        dom.remove(row);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var DeleteColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), rows = table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows[0].cells.length, focusElement, i;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                if (columnCount == 1) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    for (i = 0; i < rows.length; i++) {\n                        dom.remove(rows[i].cells[columnIndex]);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                options = extend(options, this.options);\n                if (options.action == 'delete') {\n                    if (options.type == 'row') {\n                        return new DeleteRowCommand(options);\n                    } else {\n                        return new DeleteColumnCommand(options);\n                    }\n                } else {\n                    if (options.type == 'row') {\n                        return new InsertRowCommand(options);\n                    } else {\n                        return new InsertColumnCommand(options);\n                    }\n                }\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/clipboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, extend = $.extend;\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range, editor.body);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window) || browser.msie && browser.version > 10) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                return this._insertImages(items);\n            },\n            _insertImages: function (items) {\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this.expandImmutablesIn();\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n                    this._decoreateClipboardNode(clipboardNode, body);\n                    body.appendChild(clipboardNode);\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            ondragover: function (e) {\n                if (browser.msie || browser.edge) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            },\n            ondrop: function (e) {\n                if (!('FileReader' in window)) {\n                    return;\n                }\n                var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n                var items = dataTransfer.items || dataTransfer.files;\n                if (this._insertImages(items)) {\n                    e.preventDefault();\n                }\n            },\n            _decoreateClipboardNode: function (node, body) {\n                if (!browser.msie && !browser.webkit) {\n                    return;\n                }\n                node = $(node);\n                node.css({\n                    borderWidth: '0px',\n                    width: '0px',\n                    height: '0px',\n                    overflow: 'hidden',\n                    margin: '0',\n                    padding: '0'\n                });\n                if (browser.msie) {\n                    var documentElement = $(body.ownerDocument.documentElement);\n                    node.css({\n                        fontVariant: 'normal',\n                        fontWeight: 'normal',\n                        lineSpacing: 'normal',\n                        lineHeight: 'normal',\n                        textDecoration: 'none'\n                    });\n                    var color = documentElement.css('color');\n                    if (color) {\n                        node.css('color', color);\n                    }\n                    var fontFamily = documentElement.css('fontFamily');\n                    if (fontFamily) {\n                        node.css('fontFamily', fontFamily);\n                    }\n                    var fontSize = documentElement.css('fontSize');\n                    if (fontSize) {\n                        node.css('fontSize', fontSize);\n                    }\n                }\n            },\n            _moveToCaretPosition: function (node, range) {\n                var that = this;\n                var body = that.editor.body;\n                var nodeOffset = dom.offset(node, body);\n                var caretOffset = that._caretOffset(range, body);\n                var translateX = caretOffset.left - nodeOffset.left;\n                var translateY = caretOffset.top - nodeOffset.top;\n                var translate = 'translate(' + translateX + 'px,' + translateY + 'px)';\n                $(node).css({\n                    '-webkit-transform': translate,\n                    'transform': translate\n                });\n            },\n            _caretOffset: function (range, body) {\n                var editor = this.editor;\n                var caret = dom.create(editor.document, 'span', { innerHTML: '\\uFEFF' });\n                var startContainer = range.startContainer;\n                var rangeChanged;\n                if (range.collapsed) {\n                    var isStartTextNode = dom.isDataNode(startContainer);\n                    if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                        dom.insertBefore(caret, startContainer);\n                    } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                        dom.insertAfter(caret, startContainer);\n                    } else {\n                        range.insertNode(caret);\n                        rangeChanged = true;\n                    }\n                } else {\n                    startContainer = startContainer === body ? startContainer.childNodes[range.startOffset] : startContainer;\n                    dom.insertBefore(caret, startContainer);\n                }\n                var offset = dom.offset(caret, body);\n                var prev = caret.previousSibling;\n                var next = caret.nextSibling;\n                dom.remove(caret);\n                if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                    var prevLength = prev.length;\n                    next.data = prev.data + next.data;\n                    range.setStart(next, prevLength);\n                    dom.remove(prev);\n                    range.collapse(true);\n                    editor.selectRange(range);\n                }\n                return offset;\n            },\n            expandImmutablesIn: function (range) {\n                var editor = this.editor;\n                if (editor && editor.options.immutables) {\n                    var body = editor.body;\n                    range = range || editor.getRange();\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    if (range.startContainer === body && range.startOffset === 0) {\n                        var doc = body.ownerDocument;\n                        var bomNode = doc.createTextNode('\\uFEFF');\n                        body.insertBefore(bomNode, body.childNodes[0]);\n                        range.setStartBefore(bomNode);\n                    }\n                    editor.selectRange(range);\n                }\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l, childNodes;\n                this.expandImmutablesIn();\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                if (!options.skipCleaners) {\n                    for (i = 0, l = this.cleaners.length; i < l; i++) {\n                        if (this.cleaners[i].applicable(html)) {\n                            html = this.cleaners[i].clean(html);\n                        }\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/gi, '<$1$2>&nbsp;</$1>');\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                childNodes = fragment.childNodes;\n                $(childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                $(childNodes).each(function (index, elm) {\n                    if (dom.isBlock(elm) && elm.innerHTML === '') {\n                        elm.appendChild(editor.document.createTextNode('\\uFEFF'));\n                    }\n                });\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                var focusedTable = $(range.commonAncestorContainer.parentNode).closest('table');\n                if (focusedTable.get(0)) {\n                    var siblingNodes = focusedTable.parent().contents();\n                    var lastSiblingIndex = siblingNodes.length - 1;\n                    var lastSibling = siblingNodes.get(lastSiblingIndex);\n                    while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                        lastSiblingIndex -= 1;\n                        lastSibling = siblingNodes.get(lastSiblingIndex);\n                    }\n                    if (lastSibling === focusedTable.get(0)) {\n                        dom.insertAfter(dom.createEmptyNode(editor.document, 'p'), focusedTable[0]);\n                    }\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content, name = dom.name(p);\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                } else {\n                    dom.remove(p.firstChild);\n                    if (p.firstChild.nodeType == 3) {\n                        if (/^[ivxlcdm]+\\.$/i.test(p.firstChild.nodeValue)) {\n                            dom.remove(p.firstChild);\n                        }\n                    }\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\n                        dom.remove(p.firstChild);\n                    }\n                    if (name != 'p') {\n                        content = '<' + name + '>' + p.innerHTML + '</' + name + '>';\n                    } else {\n                        content = p.innerHTML;\n                    }\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            _createList: function (type, styleType) {\n                return dom.create(document, type, { style: { listStyleType: styleType } });\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li, rootMargin, rootIndex, lastRootLi, isLastRootLi, rootList, i, p, type, margin, list, listData, acceptedNameTags = [\n                        'p',\n                        'h1',\n                        'h2',\n                        'h3',\n                        'h4',\n                        'h5',\n                        'h6'\n                    ];\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    if (name == 'td') {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || acceptedNameTags.indexOf(name) < 0) {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else if (li && !isLastRootLi) {\n                            li.append(p);\n                        }\n                        continue;\n                    }\n                    margin = listData.level || parseFloat(p.style.marginLeft || 0);\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    if (!rootMargin || rootMargin < 0) {\n                        rootMargin = margin;\n                        rootIndex = listIndex;\n                        lastRootLi = $(placeholder).find('[data-list=\\'' + rootIndex + '\\']:last')[0];\n                        rootList = this._createList(type, listType.style);\n                        dom.insertBefore(rootList, p);\n                        lastMargin = margin;\n                        levels[margin][levelType] = rootList;\n                    }\n                    isLastRootLi = lastRootLi === p;\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = this._createList(type, listType.style);\n                        levels[margin][levelType] = list;\n                        li.appendChild(list);\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    if (isLastRootLi) {\n                        rootMargin = lastMargin = -1;\n                    } else {\n                        lastMargin = margin;\n                    }\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = this.extractListLevels(html);\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                } else if (dom.isBr(node)) {\n                    this.htmlLines.appendText(this.separators.line);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        extend(editorNS, {\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/keyboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, br = '<br class=\"k-br\">', extend = $.extend;\n        var nodeTypes = dom.nodeTypes;\n        var PREVIOUS_SIBLING = 'previousSibling';\n        function selected(node, range) {\n            return range.startContainer === node && range.endContainer === node && range.startOffset === 0 && range.endOffset == node.childNodes.length;\n        }\n        function getSibling(node, direction, condition) {\n            var sibling = node ? node[direction] : null;\n            while (sibling && !condition(sibling)) {\n                sibling = sibling[direction];\n            }\n            return sibling;\n        }\n        var tableCells = 'td,th,caption';\n        var tableCellsWrappers = 'table,tbody,thead,tfoot,tr';\n        var tableElements = tableCellsWrappers + ',' + tableCells;\n        var inTable = function (range) {\n            return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers);\n        };\n        var RemoveTableContent = Class.extend({\n            remove: function (range) {\n                var that = this;\n                var marker = new Marker();\n                marker.add(range, false);\n                var nodes = RangeUtils.getAll(range, function (node) {\n                    return $(node).is(tableElements);\n                });\n                var doc = RangeUtils.documentFromRange(range);\n                var start = marker.start;\n                var end = marker.end;\n                var cellsTypes = tableCells.split(',');\n                var startCell = dom.parentOfType(start, cellsTypes);\n                var endCell = dom.parentOfType(end, cellsTypes);\n                that._removeContent(start, startCell, true);\n                that._removeContent(end, endCell, false);\n                $(nodes).each(function (i, node) {\n                    node = $(node);\n                    (node.is(tableCells) ? node : node.find(tableCells)).each(function (j, cell) {\n                        cell.innerHTML = '&#65279;';\n                    });\n                });\n                if (startCell && !start.previousSibling) {\n                    dom.insertBefore(doc.createTextNode('\\uFEFF'), start);\n                }\n                if (endCell && !end.nextSibling) {\n                    dom.insertAfter(doc.createTextNode('\\uFEFF'), end);\n                }\n                if (startCell) {\n                    range.setStartBefore(start);\n                } else if (nodes[0]) {\n                    startCell = $(nodes[0]);\n                    startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                    if (startCell.length) {\n                        range.setStart(startCell.get(0), 0);\n                    }\n                }\n                range.collapse(true);\n                dom.remove(start);\n                dom.remove(end);\n            },\n            _removeContent: function (start, top, forwards) {\n                if (top) {\n                    var sibling = forwards ? 'nextSibling' : 'previousSibling', next, getNext = function (node) {\n                            while (node && !node[sibling]) {\n                                node = node.parentNode;\n                            }\n                            return node && $.contains(top, node) ? node[sibling] : null;\n                        };\n                    start = getNext(start);\n                    while (start) {\n                        next = getNext(start);\n                        dom.remove(start);\n                        start = next;\n                    }\n                }\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    var body = editor.body;\n                    that.startRestorePoint = new RestorePoint(range, body);\n                    if (inTable(range)) {\n                        var removeTableContent = new RemoveTableContent(editor);\n                        removeTableContent.remove(range);\n                        editor.selectRange(range);\n                    }\n                    if (browser.webkit && !range.collapsed && selected(body, range)) {\n                        body.innerHTML = '';\n                    }\n                    if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                        var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                        backspaceHandler.deleteSelection(range);\n                    }\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                dom.insertAt(container, caret, 0);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                    range.setStart(caret.previousSibling, caret.previousSibling.length);\n                } else {\n                    range.setStartAfter(caret);\n                }\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                var editor = this.editor;\n                var previousSibling;\n                if (dom.isDataNode(node)) {\n                    if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                        range.setStart(node, 0);\n                        range.setEnd(node, node.length);\n                        editor.selectRange(range);\n                        return false;\n                    }\n                    this._cleanBomBefore(range);\n                }\n                previousSibling = getSibling(block, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.htmlIndentSpace(sibling);\n                });\n                if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                    range.startOffset = 0;\n                    range.endOffset = 0;\n                    editor.selectRange(range);\n                }\n                var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n                var liIndex = li && $(li).index();\n                var startAtNonFirstLi = startAtLi && liIndex > 0;\n                if (startAtNonFirstLi) {\n                    block = li;\n                    previousSibling = dom.prev(li);\n                }\n                if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                    if (block.innerText === '') {\n                        block.innerHTML = '\\uFEFF';\n                    }\n                    return true;\n                }\n                if (block && previousSibling && editorNS.RangeUtils.isStartOf(range, block) || startAtNonFirstLi) {\n                    var caret = this._addCaret(block);\n                    this._merge(previousSibling, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (startAtLi && liIndex === 0) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    editor.selectRange(range);\n                    return true;\n                }\n                var rangeStartNode = node.childNodes[range.startOffset - 1];\n                var linkRange = range;\n                var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n                var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.isDataNode(sibling) || !dom.isBom(sibling) && sibling.length > 0;\n                });\n                if (anchor || (range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, 'a')) {\n                    anchor = anchor || previousNode;\n                    linkRange = editor.createRange();\n                    linkRange.setStart(anchor, anchor.childNodes.length);\n                    linkRange.collapse(true);\n                }\n                anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n                var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n                if (isEndOfLink) {\n                    var command = new editorNS.UnlinkCommand({\n                        range: linkRange,\n                        body: editor.body,\n                        immutables: !!editor.immutables\n                    });\n                    editor.execCommand(command);\n                    editor._selectionChange();\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                var editor = this.editor;\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                    return true;\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                if (editor.immutables) {\n                    this._handleImmutables(marker);\n                }\n                this._surroundFullySelectedAnchor(marker, range);\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                editor.selectRange(range);\n                return true;\n            },\n            _handleImmutables: function (marker) {\n                var immutableParent = editorNS.Immutables.immutableParent;\n                var startImmutable = immutableParent(marker.start);\n                var endImmutable = immutableParent(marker.start);\n                if (startImmutable) {\n                    dom.insertBefore(marker.start, startImmutable);\n                }\n                if (endImmutable) {\n                    dom.insertAfter(marker.end, endImmutable);\n                }\n                if (startImmutable) {\n                    dom.remove(startImmutable);\n                }\n                if (endImmutable && endImmutable.parentNode) {\n                    dom.remove(endImmutable);\n                }\n            },\n            _surroundFullySelectedAnchor: function (marker, range) {\n                var start = marker.start, startParent = $(start).closest('a').get(0), end = marker.end, endParent = $(end).closest('a').get(0);\n                if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                    dom.insertBefore(start, startParent);\n                }\n                if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                    dom.insertAfter(end, endParent);\n                }\n            },\n            _root: function (node) {\n                while (node && dom.name(node) != 'body' && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (dest && src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n                        if (dest) {\n                            dest.appendChild(src.firstChild);\n                        }\n                    } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                        this._mergeWithTextNode(dest, src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            _mergeWithTextNode: function (textNode, appendedNode) {\n                if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                    if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                        dom.insertAfter(appendedNode, textNode.nextSibling);\n                    } else {\n                        dom.insertAfter(appendedNode, textNode);\n                    }\n                }\n            },\n            _isCaret: function (element) {\n                return $(element).is('a');\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var editor = this.editor;\n                var range = editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if (editor.immutables && editor.immutables.keydown(e, range)) {\n                    return;\n                }\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range, editor.body);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    editorNS._finishUpdate(editor, startRestorePoint);\n                }\n            },\n            deleteSelection: function (range) {\n                this._handleSelection(range);\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var SelectAllHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                if (!browser.webkit || e.isDefaultPrevented() || !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                    return;\n                }\n                if (this.editor.options.immutables) {\n                    this._toSelectableImmutables();\n                }\n                this._selectEditorBody();\n            },\n            _selectEditorBody: function () {\n                var editor = this.editor;\n                var range = editor.getRange();\n                range.selectNodeContents(editor.body);\n                editor.selectRange(range);\n            },\n            _toSelectableImmutables: function () {\n                var editor = this.editor, body = editor.body, immutable = editorNS.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            keyup: $.noop\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions, modifier = this._getShortcutModifier(e, navigator.platform);\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == modifier && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            _getShortcutModifier: function (e, platform) {\n                var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n                return mac ? e.metaKey : e.ctrlKey;\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        extend(editorNS, {\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            SelectAllHandler: SelectAllHandler,\n            Keyboard: Keyboard\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/exportpdf', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = that.lockRange(true);\n                var editor = that.editor;\n                editor._destroyResizings();\n                editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                    editor._initializeColumnResizing();\n                    editor._initializeRowResizing();\n                    editor._initializeTableResizing();\n                });\n            }\n        });\n        extend(editorNS, { ExportPdfCommand: ExportPdfCommand });\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/print', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        extend(editorNS, { PrintCommand: PrintCommand });\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/resizing-utils', ['editor/main'], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var PERCENTAGE = '%';\n        var PIXEL = 'px';\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = 'string';\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is('body') && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n            return 0;\n        }\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            } else {\n                return parseFloat(value) / total * 100;\n            }\n        }\n        function inPercentages(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value);\n        }\n        function inPixels(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PIXELS.test(value);\n        }\n        function toPercentages(value) {\n            return parseFloat(value) + PERCENTAGE;\n        }\n        function toPixels(value) {\n            return parseFloat(value) + PIXEL;\n        }\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n        extend(Editor, { ResizingUtils: ResizingUtils });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-element-resizing', [\n        'editor/main',\n        'kendo.resizable',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_ENTER = 'mouseenter';\n        var MOUSE_LEAVE = 'mouseleave';\n        var MOUSE_MOVE = 'mousemove';\n        var MOUSE_UP = 'mouseup';\n        var COMMA = ',';\n        var DOT = '.';\n        var LAST_CHILD = ':last-child';\n        var TABLE = 'table';\n        var TableElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.options.tags = $.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n            destroy: function () {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n                that._destroyResizeHandle();\n            },\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: '',\n                rtl: false,\n                handle: {\n                    dataAttribute: '',\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: ''\n                }\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n            },\n            resizingInProgress: function () {\n                var that = this;\n                var resizable = that._resizable;\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n                return false;\n            },\n            resize: noop,\n            detectElementBorderHovering: function (e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        } else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    } else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n            elementBorderHovered: noop,\n            showResizeHandle: function (tableElement, e) {\n                var that = this;\n                if (e.buttons !== 0) {\n                    return;\n                }\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n                that._initResizable(tableElement);\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n            _initResizeHandle: function () {\n                var that = this;\n                var options = that.options;\n                that._destroyResizeHandle();\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n            setResizeHandlePosition: noop,\n            setResizeHandleDimensions: noop,\n            setResizeHandleDataAttributes: function (tableElement) {\n                var that = this;\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n            _attachResizeHandleEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n                that.resizeHandle.on(MOUSE_DOWN + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).show();\n                }).on(MOUSE_UP + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n            },\n            _hideResizeMarker: function () {\n                var that = this;\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n            _destroyResizeHandle: function () {\n                var that = this;\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n            _initResizable: function (tableElement) {\n                var that = this;\n                if (!that.resizeHandle) {\n                    return;\n                }\n                that._destroyResizable();\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: proxy(that.onResizeStart, that),\n                    resize: proxy(that.onResize, that),\n                    resizeend: proxy(that.onResizeEnd, that)\n                });\n            },\n            _destroyResizable: function () {\n                var that = this;\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n            onResizeStart: function () {\n                this._disableKeyboard();\n            },\n            onResize: function (e) {\n                this.setResizeHandleDragPosition(e);\n            },\n            setResizeHandleDragPosition: noop,\n            onResizeEnd: function (e) {\n                var that = this;\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n            _disableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _forceResizing: function (e) {\n                var resizable = this._resizable;\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n        var ResizingFactory = Class.extend({\n            create: function (editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n                $(editor.body).on(MOUSE_ENTER + NS, TABLE, function (e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    } else {\n                        that._initResizing(editor, table, options);\n                    }\n                }).on(MOUSE_LEAVE + NS, TABLE, function (e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                }).on(MOUSE_LEAVE + NS, function () {\n                    var resizing = editor[resizingName];\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                }).on(MOUSE_UP + NS, function (e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n            },\n            dispose: function (editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n            _initResizing: function (editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n            _destroyResizing: function (editor, options) {\n                var resizingName = options.name;\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n        TableElementResizing.create = function (editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n        TableElementResizing.dispose = function (editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n        extend(Editor, { TableElementResizing: TableElementResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/column-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var NS = '.kendoEditorColumnResizing';\n        var RESIZE_HANDLE_CLASS = 'k-column-resize-handle';\n        var RESIZE_MARKER_CLASS = 'k-column-resize-marker';\n        var BODY = 'body';\n        var TBODY = 'tbody';\n        var TD = 'td';\n        var TH = 'th';\n        var TR = 'tr';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [\n                    TD,\n                    TH\n                ],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'column',\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n                if (mousePosition > borderOffset - handleWidth && mousePosition < borderOffset + handleWidth) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (column) {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: tableBody.offset().top + scrollTopOffset,\n                    left: column.offset().left + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - handleWidth / 2,\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: tableBody.height()\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.offset().left;\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var rootElement = $(options.rootElement);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var handleOffset = constrain({\n                    value: resizeHandle.offset().left + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n                resizeHandle.css({ left: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? -1 : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(column.next());\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(column.index(), initialAdjacentColumnWidth, initialColumnWidth, initialColumnWidth - newWidth);\n            },\n            _setTableComputedWidth: function () {\n                var element = this.element;\n                if (element.style[WIDTH] === '') {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n            _setColumnsComputedWidth: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyWidth = outerWidth(tableBody);\n                var columns = tableBody.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function () {\n                    return outerWidth($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], tableBodyWidth));\n                    } else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n            _resizeTopAndBottomColumns: function (column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).index();\n                var topAndBottomColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    var cell = this;\n                    return $(cell).index() === columnIndex && cell !== column;\n                });\n                var length = topAndBottomColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n            _resizeColumn: function (column, newWidth) {\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth($(this.element).children(TBODY))));\n                } else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n            _resizeAdjacentColumns: function (columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    return $(this).index() === columnIndex + 1;\n                });\n                var length = adjacentColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n            _resizeAdjacentColumn: function (adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n        ColumnResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'columnResizing',\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n        ColumnResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { ColumnResizing: ColumnResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/row-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var math = window.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorRowResizing';\n        var RESIZE_HANDLE_CLASS = 'k-row-resize-handle';\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = 'k-row-resize-marker-wrapper';\n        var RESIZE_MARKER_CLASS = 'k-row-resize-marker';\n        var BODY = 'body';\n        var TR = 'tr';\n        var TBODY = 'tbody';\n        var HEIGHT = 'height';\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'row',\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n                if (mousePosition > borderOffset - handleHeight && mousePosition < borderOffset + handleHeight) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rowPosition = row.offset();\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: rowPosition.top + outerHeight(row) + scrollTopOffset - handleHeight / 2,\n                    left: rowPosition.left + (scrollLeftOffset - scrollBarWidth),\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                that.resizeHandle.css({\n                    width: $(that.element).children(TBODY).width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyTopOffset = tableBody.offset().top;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var handleOffset = constrain({\n                    value: resizeHandle.offset().top + scrollTopOffset + e.y.delta,\n                    min: $(row).offset().top + scrollTopOffset + min,\n                    max: tableBodyTopOffset + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n                resizeHandle.css({ top: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableBodyHeight - options.min)\n                });\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n                if (inPercentages(initialStyleHeight)) {\n                    that._setRowsHeightInPercentages();\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setTableHeight: function (newHeight) {\n                var element = this.element;\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                } else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n        RowResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'rowResizing',\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n        RowResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { RowResizing: RowResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resize-handle', [\n        'editor/main',\n        'kendo.draganddrop',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizeHandle';\n        var RESIZE_HANDLE_CLASS = 'k-table-resize-handle';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var HALF_INSIDE = 'halfInside';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var BODY = 'body';\n        var TABLE = 'table';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        var TableResizeHandle = Observable.extend({\n            init: function (options) {\n                var that = this;\n                Observable.fn.init.call(that);\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS).remove();\n                that.element = null;\n                that._destroyDraggable();\n                that.unbind();\n            },\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template: '<div class=\\'k-table-resize-handle-wrapper\\' unselectable=\\'on\\' contenteditable=\\'false\\'>' + '<div class=\\'' + RESIZE_HANDLE_CLASS + '\\'></div>' + '</div>'\n            },\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n            show: function () {\n                this._setPosition();\n            },\n            _setPosition: function () {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: 'absolute'\n                });\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                $(that.element).on(MOUSE_OVER + NS, proxy(that._onMouseOver, that)).on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n            },\n            _onMouseOver: function () {\n                this.trigger(MOUSE_OVER);\n            },\n            _onMouseOut: function () {\n                this.trigger(MOUSE_OUT);\n            },\n            _addStyles: function () {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass('k-resize-' + that.options.direction);\n            },\n            _initPositioningStrategy: function () {\n                var that = this;\n                var options = that.options;\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n            _initDraggable: function () {\n                var that = this;\n                var element = that.element;\n                if (that._draggable || !element) {\n                    return;\n                }\n                that._draggable = new Draggable(element, {\n                    dragstart: proxy(that._onDragStart, that),\n                    drag: proxy(that._onDrag, that),\n                    dragend: proxy(that._onDragEnd, that)\n                });\n            },\n            _onDragStart: function () {\n                this.trigger(DRAG_START);\n            },\n            _onDrag: function (e) {\n                var that = this;\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n            _onDragEnd: function () {\n                this.trigger(DRAG_END);\n            },\n            _destroyDraggable: function () {\n                var that = this;\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n            _initDraggingStrategy: function () {\n                var that = this;\n                that._draggingStrategy = HandleDraggingStrategy.create({ name: that.options.direction });\n            }\n        });\n        var StrategyFactory = Class.extend({\n            init: function () {\n                this._items = [];\n            },\n            register: function (name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n            create: function (options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : '';\n                var match;\n                var item;\n                var i;\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n        var HandlePositioningStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n            getPosition: function () {\n                var that = this;\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n                return scrollOffsetPosition;\n            },\n            calculatePosition: noop,\n            applyHandleOffset: function (position) {\n                var options = this.options;\n                var handle = $(options.handle);\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - outerHeight(handle) / 2,\n                        left: position.left - outerWidth(handle) / 2\n                    };\n                }\n                return position;\n            },\n            applyScrollOffset: function (position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                if (!rootElement.is(BODY)) {\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + (rootElement.scrollLeft() || 0) - scrollBarWidth\n                    };\n                }\n                return position;\n            }\n        });\n        HandlePositioningStrategy.create = function (options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n        var HandleDraggingStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n            adjustDragDelta: function (deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n        HandleDraggingStrategy.create = function (options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n        extend(Editor, { TableResizeHandle: TableResizeHandle });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resizing', [\n        'editor/main',\n        'editor/resizing/table-resize-handle',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var TableResizeHandle = Editor.TableResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizing';\n        var RESIZE_HANDLE_WRAPPER_CLASS = 'k-table-resize-handle-wrapper';\n        var TABLE_CLASS = 'k-table';\n        var TABLE_RESIZING_CLASS = 'k-table-resizing';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var COLUMN = 'td';\n        var ROW = 'tr';\n        var TBODY = 'tbody';\n        var TABLE = 'table';\n        var WIDTH = 'width';\n        var HEIGHT = 'height';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        var TableResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                }\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS);\n                that.element = null;\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n                that._destroyResizeHandles();\n            },\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [\n                    { direction: NORTHWEST },\n                    { direction: NORTH },\n                    { direction: NORTHEAST },\n                    { direction: EAST },\n                    { direction: SOUTHEAST },\n                    { direction: SOUTH },\n                    { direction: SOUTHWEST },\n                    { direction: WEST }\n                ]\n            },\n            resize: function (args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                that.showResizeHandles();\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n                if (inPercentages(styleWidth)) {\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    } else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n                that._setColumnsWidth();\n                element[0].style[WIDTH] = newWidth;\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPercentages();\n                }\n                if (inPercentages(styleHeight)) {\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    } else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n                element[0].style[HEIGHT] = newHeight;\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPixels();\n                }\n            },\n            _getMaxDimensionValue: function (dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? -1 : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? parent.scrollLeft() : parent.scrollTop());\n                if (parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === '' && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    } else {\n                        return parentDimension + parentScrollOffset;\n                    }\n                } else {\n                    return parentDimension + parentScrollOffset;\n                }\n            },\n            _setColumnsWidth: function () {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n                    if (styleWidth !== '') {\n                        return inPercentages(styleWidth) ? true : false;\n                    } else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === '') {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n            _hasRowsInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === '' || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            showResizeHandles: function () {\n                var that = this;\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n            _initResizeHandles: function () {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n                if (handles && handles.length > 0) {\n                    return;\n                }\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new TableResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n                that._bindToResizeHandlesEvents();\n            },\n            _destroyResizeHandles: function () {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n            },\n            _showResizeHandles: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _onResizeHandleDragStart: function () {\n                var that = this;\n                var element = $(that.element);\n                element.addClass(TABLE_RESIZING_CLASS);\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n            _onResizeHandleDrag: function (e) {\n                this.resize(e);\n            },\n            _onResizeHandleDragEnd: function () {\n                var that = this;\n                $(that.element).removeClass(TABLE_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n            _disableKeyboard: function () {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function (e) {\n                    e.preventDefault();\n                });\n            }\n        });\n        var TableResizingFactory = Class.extend({\n            create: function (editor) {\n                var factory = this;\n                $(editor.body).on(MOUSE_DOWN + NS, TABLE, function (e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    if (tableResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                return;\n                            } else {\n                                if (element !== eventTarget) {\n                                    editor._destroyTableResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    } else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n                    editor._showTableResizeHandles();\n                }).on(MOUSE_DOWN + NS, function (e) {\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n                    if (tableResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyTableResizing();\n                    }\n                });\n            },\n            dispose: function (editor) {\n                $(editor.body).off(NS);\n            },\n            _initResizing: function (editor, table) {\n                if (!browser.msie && !browser.mozilla) {\n                    editor.tableResizing = new TableResizing(table, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n            }\n        });\n        TableResizingFactory.current = new TableResizingFactory();\n        TableResizing.create = function (editor) {\n            TableResizingFactory.current.create(editor);\n        };\n        TableResizing.dispose = function (editor) {\n            TableResizingFactory.current.dispose(editor);\n        };\n        extend(Editor, { TableResizing: TableResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-command', ['editor/plugins/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, Command = Editor.Command;\n        var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: ['table'] }]);\n        var cellsFormatFinder = new Editor.BlockFormatFinder([{\n                tags: [\n                    'td',\n                    'th'\n                ]\n            }]);\n        var reUnit = /([a-z]+|%)$/i;\n        var TableWizardCommand = Command.extend({\n            exec: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var range = cmd.range = cmd.lockRange();\n                var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n                var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n                var options = {\n                    visible: false,\n                    messages: editor.options.messages,\n                    closeCallback: $.proxy(cmd.onDialogClose, cmd),\n                    table: cmd.parseTable(selectedTable, selectedCells),\n                    dialogOptions: editor.options.dialogOptions,\n                    isRtl: kendo.support.isRtl(editor.wrapper)\n                };\n                var dialog = new Editor.TableWizardDialog(options);\n                dialog.open();\n            },\n            onDialogClose: function (data) {\n                var cmd = this;\n                cmd.releaseRange(cmd.range);\n                if (data) {\n                    if (cmd.options.insertNewTable) {\n                        cmd.insertTable(cmd.createNewTable(data));\n                    } else {\n                        cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                    }\n                }\n            },\n            releaseRange: function (range) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                dom.windowFromDocument(doc).focus();\n                Command.fn.releaseRange.call(cmd, range);\n            },\n            insertTable: function (table) {\n                var range = this.range;\n                range.insertNode(table);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                this._ensureFocusableAfterTable(table);\n            },\n            _ensureFocusableAfterTable: function (table) {\n                var siblingNodes = $(table).parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n                if (lastSibling === table) {\n                    dom.insertAfter(dom.createEmptyNode(this.editor.document, 'p'), table);\n                }\n            },\n            updateTable: function (data, table, selectedCells) {\n                var cmd = this;\n                var tableRows = $(table.rows).toArray();\n                var tableProp = data.tableProperties;\n                var rows = tableProp.rows;\n                var columns = tableProp.columns;\n                var last = function (collection) {\n                    return collection[collection.length - 1];\n                };\n                while (selectedCells.length > 1) {\n                    selectedCells.pop();\n                }\n                var lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n                var row, parent;\n                cmd._deleteTableRows(tableRows, tableRows.length - rows);\n                if (tableRows.length < rows) {\n                    var rowIndex = $(lastSelectedRow).index();\n                    var cellsLength = lastSelectedRow.cells.length;\n                    var newRowsCount = rows - tableRows.length;\n                    parent = lastSelectedRow.parentNode;\n                    while (newRowsCount) {\n                        row = parent.insertRow(rowIndex + 1);\n                        cmd._insertCells(cellsLength - row.cells.length, row);\n                        newRowsCount--;\n                    }\n                }\n                if (tableRows[0].cells.length > columns) {\n                    $(tableRows).each(function (i, row) {\n                        while (row.cells.length > columns) {\n                            row.deleteCell(-1);\n                        }\n                    });\n                }\n                if (tableRows[0].cells.length < columns) {\n                    var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                    $(tableRows).each(function (i, row) {\n                        cmd._insertCells(columns - row.cells.length, row, cellIndex + 1);\n                    });\n                }\n                cmd._updateTableProperties(table, tableProp);\n                var cellProp = data.cellProperties;\n                if (selectedCells[0]) {\n                    dom.attr(selectedCells[0], { id: cellProp.id || null });\n                }\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function (i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n                cmd._updateCaption(table, tableProp);\n                tableProp.cellsWithHeaders = tableProp.cellsWithHeaders || false;\n                if (cmd.cellsWithHeadersAssociated(table) != tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n            },\n            _isHeadingRow: function (row) {\n                return dom.is(row.parentNode, 'thead') || dom.is(row.cells[0], 'th');\n            },\n            associateCellsWithHeader: function (table, associate) {\n                var timestamp = new Date().getTime();\n                var ids = [];\n                var columns = table.rows[0].cells.length;\n                var index, nextRow, isDataRow;\n                var generateIds = function () {\n                    for (var i = 0; i < columns; i++) {\n                        ids[i] = 'table' + ++timestamp;\n                    }\n                };\n                var modifySellsIds = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('id', ids[c]);\n                };\n                var modifyCellsHeadings = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('headers', ids[c]);\n                };\n                var isHeadingRow = this._isHeadingRow;\n                $(table.rows).each(function (r, row) {\n                    if (isHeadingRow(row)) {\n                        index = r;\n                        nextRow = table.rows[++index];\n                        isDataRow = nextRow && !isHeadingRow(nextRow);\n                        if (isDataRow) {\n                            generateIds();\n                            $(row.cells).each(modifySellsIds);\n                        }\n                        while (isDataRow) {\n                            $(nextRow.cells).each(modifyCellsHeadings);\n                            nextRow = table.rows[++index];\n                            isDataRow = nextRow && !isHeadingRow(nextRow);\n                        }\n                    }\n                });\n            },\n            cellsWithHeadersAssociated: function (table) {\n                var cells = $(table.rows).children();\n                var isHeadingRow = this._isHeadingRow;\n                var headingIds = [];\n                cells.each(function (c, cell) {\n                    if (cell.id && isHeadingRow(cell.parentNode)) {\n                        headingIds.push(cell.id);\n                    }\n                });\n                var associatedCells = cells.filter(function (c, cell) {\n                    var headersAttr = cell.getAttribute('headers');\n                    return headersAttr && !isHeadingRow(cell.parentNode) && $.inArray(headersAttr, headingIds) > -1;\n                });\n                return !!associatedCells.length;\n            },\n            _insertCells: function (count, row, index) {\n                index = isNaN(index) ? -1 : index;\n                for (var i = 0, cell; i < count; i++) {\n                    cell = row.insertCell(index);\n                    cell.innerHTML = '&nbsp;';\n                }\n            },\n            _deleteTableRows: function (rows, count) {\n                for (var i = 0, row, rowParent; i < count; i++) {\n                    row = rows.pop();\n                    rowParent = row.parentNode;\n                    rowParent.removeChild(row);\n                    if (!rowParent.rows.length) {\n                        dom.remove(rowParent);\n                    }\n                }\n            },\n            createNewTable: function (data) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                var tableProp = data.tableProperties;\n                var cellProp = data.cellProperties;\n                var cellPropToAll = cellProp.selectAllCells;\n                var table = dom.create(doc, 'table');\n                cmd._updateTableProperties(table, tableProp);\n                cmd._updateCaption(table, tableProp);\n                var tbody = table.createTBody();\n                for (var r = 0, row; r < tableProp.rows; r++) {\n                    row = tbody.insertRow();\n                    for (var c = 0, cell; c < tableProp.columns; c++) {\n                        cell = row.insertCell();\n                        cell.innerHTML = '&nbsp;';\n                        if (r === 0 && c === 0 && cellProp.id) {\n                            cell.id = cellProp.id;\n                        }\n                        cmd._updateCellProperties(cell, cellPropToAll || r === 0 && c === 0 ? cellProp : {});\n                    }\n                }\n                if (tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n                return table;\n            },\n            _updateTableProperties: function (table, data) {\n                var style = this._getStylesData(data);\n                dom.attr(table, {\n                    cellSpacing: data.cellSpacing || null,\n                    cellPadding: data.cellPadding || null,\n                    className: data.className || null,\n                    id: data.id || null,\n                    summary: data.summary || null,\n                    style: style || null\n                });\n                $(table).addClass('k-table');\n            },\n            _updateCellProperties: function (cell, data) {\n                var style = this._getStylesData(data);\n                style.padding = data.cellPadding || null;\n                style.margin = data.cellMargin || null;\n                dom.attr(cell, {\n                    style: style || null,\n                    className: data.className || null\n                });\n            },\n            _updateCaption: function (table, data) {\n                if (table.caption && !data.captionContent) {\n                    table.deleteCaption();\n                } else if (data.captionContent) {\n                    var caption = table.createCaption();\n                    caption.innerHTML = data.captionContent;\n                    var alignment = this._getAlignmentData(data.captionAlignment);\n                    dom.attr(caption, {\n                        style: {\n                            textAlign: alignment.textAlign,\n                            verticalAlign: alignment.verticalAlign\n                        }\n                    });\n                }\n            },\n            _getStylesData: function (data) {\n                var alignment = this._getAlignmentData(data.alignment);\n                var whiteSpace = 'wrapText' in data ? data.wrapText ? '' : 'nowrap' : null;\n                return {\n                    width: data.width ? data.width + data.widthUnit : null,\n                    height: data.height ? data.height + data.heightUnit : null,\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign,\n                    backgroundColor: data.bgColor || null,\n                    borderWidth: data.borderWidth,\n                    borderStyle: data.borderStyle,\n                    borderColor: data.borderColor,\n                    borderCollapse: data.collapseBorders ? 'collapse' : null,\n                    whiteSpace: whiteSpace\n                };\n            },\n            _getAlignmentData: function (alignment) {\n                var textAlign = '';\n                var verticalAlign = textAlign;\n                if (alignment) {\n                    if (alignment.indexOf(' ') != -1) {\n                        var align = alignment.split(' ');\n                        textAlign = align[0];\n                        verticalAlign = align[1];\n                    } else {\n                        textAlign = alignment;\n                    }\n                }\n                return {\n                    textAlign: textAlign,\n                    verticalAlign: verticalAlign\n                };\n            },\n            parseTable: function (table, selectedCells) {\n                if (!table) {\n                    return {\n                        tableProperties: {},\n                        selectedCells: []\n                    };\n                }\n                var cmd = this;\n                var tStyle = table.style;\n                var rows = table.rows;\n                var caption = table.caption;\n                var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n                captionClone.find('.k-marker').remove();\n                var cssClass = table.className;\n                cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, '');\n                cssClass = cssClass.replace(/\\sk-table\\s/, ' ');\n                cssClass = cssClass.replace(/^k-table$/, '');\n                var tableAlignment = cmd._getAlignment(table, true);\n                var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n                var cellsWithHeaders = cmd.cellsWithHeadersAssociated(table);\n                var tableJson = {\n                    tableProperties: {\n                        width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                        height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                        columns: rows[0] ? rows[0].children.length : 0,\n                        rows: rows.length,\n                        widthUnit: cmd._getUnit(tStyle.width),\n                        heightUnit: cmd._getUnit(tStyle.height),\n                        cellSpacing: table.cellSpacing,\n                        cellPadding: table.cellPadding,\n                        alignment: tableAlignment.textAlign,\n                        bgColor: tStyle.backgroundColor || table.bgColor,\n                        className: cssClass,\n                        id: table.id,\n                        borderWidth: tStyle.borderWidth || table.border,\n                        borderColor: tStyle.borderColor,\n                        borderStyle: tStyle.borderStyle || '',\n                        collapseBorders: !!tStyle.borderCollapse,\n                        summary: table.summary,\n                        captionContent: caption ? captionClone.html() : '',\n                        captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + ' ' + captionAlignment.verticalAlign : '',\n                        cellsWithHeaders: cellsWithHeaders\n                    },\n                    selectedCells: []\n                };\n                tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n                return tableJson;\n            },\n            parseTableRows: function (rows, selectedCells, tableJson) {\n                var cmd = this;\n                var data = [], row, rowData, cells, cell, cellData;\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    rowData = { cells: [] };\n                    cells = row.cells;\n                    data.push(rowData);\n                    for (var j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        cellData = cmd.parseCell(cell);\n                        if ($.inArray(cell, selectedCells) != -1) {\n                            tableJson.selectedCells.push(cellData);\n                        }\n                        rowData.cells.push(cellData);\n                    }\n                }\n                return data;\n            },\n            parseCell: function (cell) {\n                var cmd = this;\n                var cStyle = cell.style;\n                var alignment = cmd._getAlignment(cell);\n                alignment = alignment.textAlign ? alignment.textAlign + ' ' + alignment.verticalAlign : '';\n                var data = {\n                    width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                    height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                    widthUnit: cmd._getUnit(cStyle.width),\n                    heightUnit: cmd._getUnit(cStyle.height),\n                    cellMargin: cStyle.margin,\n                    cellPadding: cStyle.padding,\n                    alignment: alignment,\n                    bgColor: cStyle.backgroundColor || cell.bgColor,\n                    className: cell.className,\n                    id: cell.id,\n                    borderWidth: cStyle.borderWidth || cell.border,\n                    borderColor: cStyle.borderColor,\n                    borderStyle: cStyle.borderStyle,\n                    wrapText: cStyle.whiteSpace != 'nowrap'\n                };\n                return data;\n            },\n            _getAlignment: function (element, horizontalOnly) {\n                var style = element.style;\n                var hAlign = style.textAlign || element.align || '';\n                if (horizontalOnly) {\n                    return { textAlign: hAlign };\n                }\n                var vAlign = style.verticalAlign || element.vAlign || '';\n                if (hAlign && vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: vAlign\n                    };\n                }\n                if (!hAlign && vAlign) {\n                    return {\n                        textAlign: 'left',\n                        verticalAlign: vAlign\n                    };\n                }\n                if (hAlign && !vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: 'top'\n                    };\n                }\n                return {\n                    textAlign: '',\n                    verticalAlign: ''\n                };\n            },\n            _getUnit: function (value) {\n                var unit = (value || '').match(reUnit);\n                return unit ? unit[0] : 'px';\n            },\n            _selectedTable: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return tableFormatFinder.findSuitable(nodes)[0];\n            },\n            _selectedCells: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return cellsFormatFinder.findSuitable(nodes);\n            }\n        });\n        var TableWizardTool = Editor.Tool.extend({\n            command: function (options) {\n                options.insertNewTable = this.options.insertNewTable;\n                return new TableWizardCommand(options);\n            }\n        });\n        var TableWizardEditTool = TableWizardTool.extend({\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        kendo.ui.editor.TableWizardTool = TableWizardTool;\n        kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n        registerTool('tableWizard', new TableWizardEditTool({\n            command: TableWizardCommand,\n            insertNewTable: false,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Wizard'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-dialog', ['editor/table-wizard/table-wizard-command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, numericTextBoxSettings = {\n                format: '0',\n                min: 0\n            }, units = [\n                'px',\n                'em'\n            ], borderStyles = [\n                'solid',\n                'dotted',\n                'dashed',\n                'double',\n                'groove',\n                'ridge',\n                'inset',\n                'outset',\n                'initial',\n                'inherit',\n                'none',\n                'hidden'\n            ];\n        var tableAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var cellAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var accessibilityAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var dialogTemplate = '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' + '<ul>' + '<li class=\"k-state-active\">#= messages.tableTab #</li>' + '<li>#= messages.cellTab #</li>' + '<li>#= messages.accessibilityTab #</li>' + '</ul>' + '<div id=\"k-table-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-width\" />' + '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-height\" />' + '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-border-width\" />' + '<input id=\"k-editor-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' + '</div>' + '</div>' + '<div id=\"k-cell-properties\">' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-width\" />' + '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-height\" />' + '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' + '<input id=\"k-editor-cell-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' + '</div>' + '</div>' + '<div id=\"k-accessibility-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-caption\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<textarea id=\"k-editor-accessibility-summary\" class=\"k-input k-textbox\"></textarea>' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cells-headers\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-cells-headers\" class=\"k-checkbox-label\">#= messages.associateCellsWithHeaders #</label>' + '</div>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-button k-primary k-dialog-ok\">#= messages.dialogOk #</button>' + '<button class=\"k-button k-dialog-close\">#= messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>';\n        var TableWizardDialog = kendo.Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            open: function () {\n                var that = this, options = that.options, dialogOptions = options.dialogOptions, tableData = options.table, dialog, messages = options.messages, isIE = kendo.support.browser.msie;\n                function close(e) {\n                    e.preventDefault();\n                    that.destroy();\n                    dialog.destroy();\n                }\n                function okHandler(e) {\n                    that.collectDialogValues(tableData);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    options.closeCallback(tableData);\n                }\n                function closeHandler(e) {\n                    close(e);\n                    options.closeCallback();\n                }\n                dialogOptions.close = closeHandler;\n                dialogOptions.title = messages.tableWizard;\n                dialogOptions.visible = options.visible;\n                dialog = $(that._dialogTemplate(messages)).appendTo(document.body).kendoWindow(dialogOptions).closest('.k-window').toggleClass('k-rtl', options.isRtl).end().find('.k-dialog-ok').click(okHandler).end().find('.k-dialog-close').click(closeHandler).end().data('kendoWindow');\n                var element = dialog.element;\n                that._initTabStripComponent(element);\n                that._initTableViewComponents(element, tableData);\n                that._initCellViewComponents(element, tableData);\n                that._initAccessibilityViewComponents(element, tableData);\n                dialog.center();\n                dialog.open();\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n            },\n            _initTabStripComponent: function (element) {\n                var components = this.components = {};\n                components.tabStrip = element.find('#k-table-wizard-tabs').kendoTabStrip({ animation: false }).data('kendoTabStrip');\n            },\n            collectDialogValues: function () {\n                var that = this;\n                var data = that.options.table;\n                that._collectTableViewValues(data);\n                that._collectCellViewValues(data);\n                that._collectAccessibilityViewValues(data);\n            },\n            _collectTableViewValues: function (tableData) {\n                var tableView = this.components.tableView;\n                var tableProperties = tableData.tableProperties;\n                tableProperties.width = tableView.width.value();\n                tableProperties.widthUnit = tableView.widthUnit.value();\n                tableProperties.height = tableView.height.value();\n                tableProperties.columns = tableView.columns.value();\n                tableProperties.rows = tableView.rows.value();\n                tableProperties.heightUnit = tableView.heightUnit.value();\n                tableProperties.cellSpacing = tableView.cellSpacing.value();\n                tableProperties.cellPadding = tableView.cellPadding.value();\n                tableProperties.alignment = tableView.alignment.value();\n                tableProperties.bgColor = tableView.bgColor.value();\n                tableProperties.className = tableView.className.value;\n                tableProperties.id = tableView.id.value;\n                tableProperties.borderWidth = tableView.borderWidth.value();\n                tableProperties.borderColor = tableView.borderColor.value();\n                tableProperties.borderStyle = tableView.borderStyle.value();\n                tableProperties.collapseBorders = tableView.collapseBorders.checked;\n            },\n            _collectCellViewValues: function (table) {\n                var cellData = table.cellProperties = {};\n                var cellView = this.components.cellView;\n                cellData.selectAllCells = cellView.selectAllCells.checked;\n                cellData.width = cellView.width.value();\n                cellData.widthUnit = cellView.widthUnit.value();\n                cellData.height = cellView.height.value();\n                cellData.heightUnit = cellView.heightUnit.value();\n                cellData.cellMargin = cellView.cellMargin.value();\n                cellData.cellPadding = cellView.cellPadding.value();\n                cellData.alignment = cellView.alignment.value();\n                cellData.bgColor = cellView.bgColor.value();\n                cellData.className = cellView.className.value;\n                cellData.id = cellView.id.value;\n                cellData.borderWidth = cellView.borderWidth.value();\n                cellData.borderColor = cellView.borderColor.value();\n                cellData.borderStyle = cellView.borderStyle.value();\n                cellData.wrapText = cellView.wrapText.checked;\n                if (!cellData.width) {\n                    cellData.selectAllCells = true;\n                    cellData.width = 100 / table.tableProperties.columns;\n                    cellData.widthUnit = '%';\n                }\n            },\n            _collectAccessibilityViewValues: function (table) {\n                var tableProperties = table.tableProperties;\n                var accessibilityView = this.components.accessibilityView;\n                tableProperties.captionContent = accessibilityView.captionContent.value;\n                tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n                tableProperties.summary = accessibilityView.summary.value;\n                tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.checked;\n            },\n            _addUnit: function (units, value) {\n                if (value && $.inArray(value, units) == -1) {\n                    units.push(value);\n                }\n            },\n            _initTableViewComponents: function (element, table) {\n                var components = this.components;\n                var tableView = components.tableView = {};\n                var tableProperties = table.tableProperties = table.tableProperties || {};\n                tableProperties.borderStyle = tableProperties.borderStyle || '';\n                this._addUnit(units, tableProperties.widthUnit);\n                this._addUnit(units, tableProperties.heightUnit);\n                this._initNumericTextbox(element.find('#k-editor-table-width'), 'width', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-height'), 'height', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-columns'), 'columns', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initNumericTextbox(element.find('#k-editor-table-rows'), 'rows', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initDropDownList(element.find('#k-editor-table-width-type'), 'widthUnit', tableProperties, tableView, units);\n                this._initDropDownList(element.find('#k-editor-table-height-type'), 'heightUnit', tableProperties, tableView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-spacing'), 'cellSpacing', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-padding'), 'cellPadding', tableProperties, tableView);\n                this._initTableAlignmentDropDown(element.find('#k-editor-table-alignment'), tableProperties);\n                this._initColorPicker(element.find('#k-editor-table-bg'), 'bgColor', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-css-class'), 'className', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-id'), 'id', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-border-width'), 'borderWidth', tableProperties, tableView);\n                this._initColorPicker(element.find('#k-editor-border-color'), 'borderColor', tableProperties, tableView);\n                this._initDropDownList(element.find('#k-editor-border-style'), 'borderStyle', tableProperties, tableView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-collapse-borders'), 'collapseBorders', tableProperties, tableView);\n            },\n            _initCellViewComponents: function (element, table) {\n                var components = this.components;\n                var cellView = components.cellView = {};\n                table.selectedCells = table.selectedCells = table.selectedCells || [];\n                var cellProperties = table.selectedCells[0] || {\n                    borderStyle: '',\n                    wrapText: true\n                };\n                this._addUnit(units, cellProperties.widthUnit);\n                this._addUnit(units, cellProperties.heightUnit);\n                this._initCheckbox(element.find('#k-editor-selectAllCells'), 'selectAllCells', table.tableProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-width'), 'width', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-height'), 'height', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-width-type'), 'widthUnit', cellProperties, cellView, units);\n                this._initDropDownList(element.find('#k-editor-cell-height-type'), 'heightUnit', cellProperties, cellView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-margin'), 'cellMargin', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-table-cells-padding'), 'cellPadding', cellProperties, cellView);\n                this._initCellAlignmentDropDown(element.find('#k-editor-cell-alignment'), cellProperties);\n                this._initColorPicker(element.find('#k-editor-cell-bg'), 'bgColor', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-css-class'), 'className', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-id'), 'id', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-border-width'), 'borderWidth', cellProperties, cellView);\n                this._initColorPicker(element.find('#k-editor-cell-border-color'), 'borderColor', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-border-style'), 'borderStyle', cellProperties, cellView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-wrap-text'), 'wrapText', cellProperties, cellView);\n            },\n            _initAccessibilityViewComponents: function (element, table) {\n                var components = this.components;\n                var accessibilityView = components.accessibilityView = {};\n                var tableProperties = table.tableProperties;\n                this._initInput(element.find('#k-editor-table-caption'), 'captionContent', tableProperties, accessibilityView);\n                this._initAccessibilityAlignmentDropDown(element.find('#k-editor-accessibility-alignment'), tableProperties);\n                this._initInput(element.find('#k-editor-accessibility-summary'), 'summary', tableProperties, accessibilityView);\n                this._initCheckbox(element.find('#k-editor-cells-headers'), 'cellsWithHeaders', tableProperties, accessibilityView);\n            },\n            _initNumericTextbox: function (element, property, data, storage, settings) {\n                var component = storage[property] = element.kendoNumericTextBox(settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings).data('kendoNumericTextBox');\n                if (property in data) {\n                    component.value(parseInt(data[property], 10));\n                }\n            },\n            _initDropDownList: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({ dataSource: dataSource }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initTableAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var tableView = this.components.tableView;\n                var dataSource = tableAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeft;\n                dataSource[1].tooltip = messages.alignCenter;\n                dataSource[2].tooltip = messages.alignRight;\n                dataSource[3].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, 'alignment', data, tableView);\n            },\n            _initCellAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var cellView = this.components.cellView;\n                var dataSource = cellAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftMiddle;\n                dataSource[4].tooltip = messages.alignCenterMiddle;\n                dataSource[5].tooltip = messages.alignRightMiddle;\n                dataSource[6].tooltip = messages.alignLeftBottom;\n                dataSource[7].tooltip = messages.alignCenterBottom;\n                dataSource[8].tooltip = messages.alignRightBottom;\n                dataSource[9].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, 'alignment', data, cellView);\n            },\n            _initAccessibilityAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var accessibilityView = this.components.accessibilityView;\n                var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftBottom;\n                dataSource[4].tooltip = messages.alignCenterBottom;\n                dataSource[5].tooltip = messages.alignRightBottom;\n                dataSource[6].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, 'captionAlignment', data, accessibilityView);\n            },\n            _initAlignmentDropDown: function (element, settings, name, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                component.list.addClass('k-align').css('width', '110px');\n                this._setComponentValue(component, data, name);\n            },\n            _setComponentValue: function (component, data, property) {\n                if (property in data) {\n                    component.value(data[property]);\n                }\n            },\n            _initColorPicker: function (element, property, data, storage) {\n                var component = storage[property] = element.kendoColorPicker({\n                    buttons: false,\n                    clearButton: true\n                }).data('kendoColorPicker');\n                if (data[property]) {\n                    component.value(data[property]);\n                }\n            },\n            _initInput: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.value = data[property];\n                }\n            },\n            _initCheckbox: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.checked = data[property];\n                }\n            },\n            destroy: function () {\n                this._destroyComponents(this.components.tableView);\n                this._destroyComponents(this.components.cellView);\n                this._destroyComponents(this.components.accessibilityView);\n                this._destroyComponents(this.components);\n                delete this.components;\n            },\n            _destroyComponents: function (components) {\n                for (var widget in components) {\n                    if (components[widget].destroy) {\n                        components[widget].destroy();\n                    }\n                    delete components[widget];\n                }\n            },\n            _dialogTemplate: function (messages) {\n                return kendo.template(dialogTemplate)({ messages: messages });\n            }\n        });\n        kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'kendo.tabstrip',\n        'kendo.numerictextbox',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/command',\n        'editor/components',\n        'editor/toolbar',\n        'editor/immutables',\n        'editor/plugins/viewhtml',\n        'editor/plugins/link',\n        'editor/plugins/lists',\n        'editor/plugins/formatting',\n        'editor/plugins/image',\n        'editor/plugins/import',\n        'editor/plugins/insert',\n        'editor/plugins/export',\n        'editor/plugins/indent',\n        'editor/plugins/linebreak',\n        'editor/plugins/format',\n        'editor/plugins/inlineformat',\n        'editor/plugins/formatblock',\n        'editor/plugins/file',\n        'editor/plugins/tables',\n        'editor/plugins/clipboard',\n        'editor/plugins/keyboard',\n        'editor/plugins/exportpdf',\n        'editor/plugins/print',\n        'editor/resizing/column-resizing',\n        'editor/resizing/row-resizing',\n        'editor/resizing/table-resizing',\n        'editor/resizing/table-resize-handle',\n        'editor/table-wizard/table-wizard-command',\n        'editor/table-wizard/table-wizard-dialog'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-tablewizard',\n                name: 'Table wizard dialog',\n                description: 'Support for table properties configuration',\n                depends: [\n                    'tabstrip',\n                    'button',\n                    'numerictextbox'\n                ]\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}